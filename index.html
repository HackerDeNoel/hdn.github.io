<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HDN Christmas Project 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- QR Code Scanner -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <!-- QRCode.js for generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background-color: #000000;
            color: #ffffff;
            min-height: 100vh;
            width: 100%;
            display: block;
        }

        p {
            font-size: clamp(0.875rem, 0.125vw + 0.85rem, 1rem);
        }

        .container {
            max-width: 1281px;
  margin: 0 auto;
  padding: 10px;
  display: flex;
  flex-flow: column nowrap;
  justify-content: center;
  align-items: center;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #343973, #4a5193);
            padding: 30px 20px;
            margin-bottom: 30px;
        }

        header h1 {
            text-align: center;
            font-size: clamp(1.125rem, 0.75vw + 0.975rem, 1.875rem);
            color: #81FE0E;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 10px;
        }

        header p {
            text-align: center;
            color: #ffffff;
            font-size: 16px;
            opacity: 0.9;
        }

        /* Cards */
        .card {
            background: white;
            color: #000000;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }

        .card h2 {
            color: #343973;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #81FE0E;
            padding-bottom: 10px;
        }

        .card h3 {
            color: #343973;
            margin: 20px 0 15px 0;
            font-size: 1.3em;
        }

        /* Navigation */
        nav {
            background: white;
  border-radius: 15px;
  padding: 20px;
  margin-bottom: 30px;
  box-shadow: 0 0 30px rgba(129, 254, 14, 0.2);
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  width: 100%;
  max-width: 1000px;
        }

        nav button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            background: #343973;
            color: white;
        }

        nav button:hover {
            background: #4a5193;
            transform: translateY(-2px);
        }

        nav button.active {
            background: #81FE0E;
            color: #000000;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
            font-size: 0.9em;
        }

        .btn-primary {
            background: #343973;
            color: white;
        }

        .btn-primary:hover {
            background: #4a5193;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #81FE0E;
            color: #000000;
        }

        .btn-success:hover {
            background: #6dd90c;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #ff4444;
            color: white;
        }

        .btn-danger:hover {
            background: #cc0000;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #ffaa00;
            color: #000000;
        }

        .btn-warning:hover {
            background: #ff8800;
            transform: translateY(-2px);
        }

        /* Forms */
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #343973;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #81FE0E;
            box-shadow: 0 0 10px rgba(129, 254, 14, 0.3);
        }

        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            color: #343973;
            font-weight: 700;
        }

        /* Password input with eye toggle */
        .password-container {
            position: relative;
            width: 100%;
        }

        .password-container input {
            width: 100%;
            padding-right: 50px;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            color: #343973;
            padding: 5px;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .password-toggle:hover {
            opacity: 1;
        }

        /* Radio buttons */
        .radio-group {
            display: flex;
            gap: 20px;
            margin: 15px 0;
        }

        .radio-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #343973;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            background: white;
        }

        .radio-option:hover {
            border-color: #81FE0E;
            box-shadow: 0 0 15px rgba(129, 254, 14, 0.2);
        }

        .radio-option.active {
            border-color: #81FE0E;
            background: rgba(129, 254, 14, 0.1);
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        /* Sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            width: 100%;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, #343973, #4a5193);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 0 20px rgba(129, 254, 14, 0.2);
        }

        .stat-box h3 {
            font-size: 2em;
            color: #81FE0E;
            margin-bottom: 5px;
        }

        .stat-box p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Enigmes List */
        .enigme-item {
            background: #f9f9f9;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
        }

        .enigme-item.solved {
            background: rgba(129, 254, 14, .12);
        }

        .enigme-item.locked {
            border-left-color: #ff4444;
            background: rgba(255, 68, 68, .12);
            opacity: 0.7;
        }

        .enigme-item h3 {
            color: #343973;
            margin-bottom: 10px;
        }

        /* Enigme Image */
        .enigme-image {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 10px;
            margin: 15px auto;
            display: block;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: 700;
            margin: 2px;
        }

        .badge-success {
            background: #81FE0E;
            color: #000000;
        }

        .badge-primary {
            background: #343973;
            color: white;
        }

        .badge-danger {
            background: #ff4444;
            color: white;
        }

        .badge-warning {
            background: #ffaa00;
            color: #000000;
        }

        /* Classement */
        .ranking-item {
            background: white;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 0 15px rgba(129, 254, 14, 0.1);
        }

        .ranking-position {
            font-size: 2em;
            font-weight: 900;
            color: #343973;
            min-width: 50px;
            text-align: center;
        }

        .ranking-position.first { color: #FFD700; }
        .ranking-position.second { color: #C0C0C0; }
        .ranking-position.third { color: #CD7F32; }

        .ranking-info {
            flex: 1;
        }

        .ranking-points {
            font-size: 1.5em;
            font-weight: 700;
            color: #000;
        }

        /* Alert */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 700;
        }

        .alert-success {
            background: #81FE0E;
            color: #000000;
        }

        .alert-danger {
            background: #ff4444;
            color: white;
        }

        .alert-warning {
            background: #ffaa00;
            color: #000000;
        }

        .alert-info {
            background: #343973;
            color: white;
        }

        /* Timer */
        .timer {
            background: linear-gradient(135deg, #343973, #4a5193);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 0 20px rgba(129, 254, 14, 0.2);
        }

        .timer h2 {
            color: #81FE0E !important;
            font-size: 2.5em;
            margin: 0;
            border: none;
        }

        .timer p {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }

        /* Loading */
        .loading {
            text-align: center;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
                letter-spacing: 2px;
            }

            .card {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .radio-group {
                flex-direction: column;
            }

            nav {
                flex-direction: column;
            }

            nav button {
                width: 100%;
            }
        }

        /* Hide/Show utilities */
        .hidden {
            display: none !important;
        }

        /* User info header */
        .user-info {
            background: white;
  padding: 15px 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 0 20px rgba(129, 254, 14, 0.2);
  gap: 15px;
  width: 100%;
        }

        .user-info-left {
            color: #666;
            flex: 1;
        }

        .user-info-left strong {
            color: #000000;
            font-size: 1.3em;
            font-weight: 900;
        }
        
        .user-info-left span {
            color: #343973;
            font-size: 0.9em;
            margin-left: 10px;
        }

        /* Hints section */
        .hints-section {
            display: flex;
            flex-flow: column nowrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #343973;
        }

.hints-section div {
    display: flex;
    flex: column nowrap;
    gap: 10px;
}

@media screen and (min-width: 961px) {
    .hints-section div {
    flex: row nowrap;;
}
}

        .hint-item {
            padding: 10px;
            margin: 10px 0;
            background: white;
            border-radius: 8px;
        }

         .hint-item.locked {
            cursor: none;
            opacity: 0.5;
         }


        /* Lockout timer */
        .lockout-timer {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .lockout-timer h3 {
            color: white !important;
            margin: 10px 0 !important;
            font-size: 2em;
        }

        /* QR Scanner */
        #qrScanner {
            margin: 20px auto;
            border: 3px solid #81FE0E;
            border-radius: 10px;
            overflow: hidden;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            color: #000;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(129, 254, 14, 0.5);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            z-index: 9999;
            animation: slideUp 0.3s ease-out;
            max-width: 90%;
            word-wrap: break-word;
            white-space: pre-line;
        }

        .toast.success {
            background: #81FE0E;
            color: #000;
        }

        .toast.error {
            background: #ff4444;
            color: white;
        }

        .toast.warning {
            background: #ffaa00;
            color: #000;
        }

        .toast.info {
            background: #343973;
            color: white;
        }

        @keyframes slideUp {
            from {
                bottom: -100px;
                opacity: 0;
            }
            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        /* Auth choice buttons */
        .auth-choice-container {
            display: flex;
            flex-flow: column nowrap;
            gap: 20px;
            margin: 30px 0;
        }

        @media screen and (min-width: 961px) {
            .auth-choice-container {
                flex-flow: row nowrap;
            }
        }

        .auth-choice-btn {
            flex: 1;
            padding: 30px 20px;
            border: 3px solid #343973;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .auth-choice-btn:hover {
            border-color: #81FE0E;
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(129, 254, 14, 0.3);
        }

        .auth-choice-btn h3 {
            color: #343973;
            margin: 10px 0;
            font-size: 1.5em;
        }

        .auth-choice-btn p {
            color: #666;
            margin: 10px 0 0 0;
        }

        /* QR Code Display */
        .qr-code-container {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            border: 2px solid #343973;
        }

        .qr-code-container canvas,
        .qr-code-container img {
            margin: 15px auto;
            display: block;
            background: white;
            padding: 10px;
            border-radius: 8px;
        }

        /* Floating rules button */
.floating-rules-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #343973;
    color: white;
    padding: 15px 25px;
    border-radius: 50px;
    border: none;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    font-size: 1em;
    cursor: pointer;
    transition: all 0.3s;
    z-index: 1000;
}

.floating-rules-btn:hover {
    background: #81FE0E;
    color: #000;
    transform: translateY(-3px);
}

/* Rules modal */
.rules-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.rules-modal-content {
    background: white;
    border-radius: 15px;
    padding: 10px;
    max-width: 800px;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
}

.rules-modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #ff4444;
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 1.5em;
    cursor: pointer;
    font-weight: bold;
}

.rules-modal-close:hover {
    background: #cc0000;
}
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>üéÑ HDN Saison 3 üéÖ</h1>
            <p>Chasse au Tr√©sor 2025 | 25 Nov - 08 D√©c</p>
        </div>
    </header>

    <div class="container">
        <!-- User Info (hidden by default) -->
        <div class="user-info hidden" id="userInfo">
            <div class="user-info-left">
                <strong id="userPseudo"></strong>
                <span id="userTeamInfo"></span>
            </div>
            <button class="btn btn-danger" onclick="hdnApp.logout()">üö™ D√©connexion</button>
        </div>

        <!-- Navigation (hidden by default) -->
        <nav class="hidden" id="mainNav">
            <button onclick="hdnApp.showSection('home')">üè† Accueil</button>
            <button id="enigmaNavBtn" onclick="hdnApp.showSection('enigmes')">üí° √ânigmes</button>
            <button onclick="hdnApp.showSection('ranking')">üèÜ Classement</button>
            <button onclick="hdnApp.showSection('rules')">üìã R√®gles</button>
            <button class="hidden" id="adminNavBtn" onclick="hdnApp.showSection('admin')">‚öôÔ∏è Admin</button>
        </nav>

        <!-- AUTH SECTION -->
        <div class="section active" id="auth-section">
            <div class="card">
                <h2>üîê Bienvenue !</h2>

                <!-- Step 1: Already registered? -->
                <div id="authChoice">
                    <h3 style="text-align: center; margin-bottom: 20px;">√ätes-vous d√©j√† inscrit ?</h3>
                    <div class="auth-choice-container">
                        <div class="auth-choice-btn" onclick="hdnApp.showLogin()">
                            <h3>‚úÖ Oui</h3>
                            <p>Je me connecte</p>
                        </div>
                        <div class="auth-choice-btn" onclick="hdnApp.showRegister()">
                            <h3>‚ùå Non</h3>
                            <p>Je m'inscris</p>
                        </div>
                    </div>
                    <button class="floating-rules-btn" onclick="hdnApp.showRulesModal()">
                        üìã R√®gles du jeu
                    </button>
                </div>

                <!-- Step 2: Login Form (hidden) -->
                <div id="loginForm" class="hidden">
                    <h3>üîë Connexion</h3>
                    <label>Pseudo</label>
                    <input type="text" id="loginPseudo" placeholder="Ton pseudo" />

                    <label>Mot de passe (6 chiffres)</label>
                    <div class="password-container">
                        <input type="password" id="loginPassword" placeholder="123456" maxlength="6"
                               inputmode="numeric" pattern="[0-9]*"
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                        <button type="button" class="password-toggle"
                                onclick="togglePassword('loginPassword', this)">üëÅÔ∏è</button>
                    </div>

                    <button class="btn btn-success" style="width: 100%; margin-top: 15px;" onclick="hdnApp.login()">
                        üöÄ Se connecter
                    </button>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToChoice()">
                        ‚Üê Retour
                    </button>
                </div>

                <!-- Step 3: Register Choice (hidden) -->
                <div id="registerChoice" class="hidden">
                    <h3 style="text-align: center; margin-bottom: 20px;">Comment voulez-vous jouer ?</h3>
                    <div class="radio-group">
                        <div class="radio-option" onclick="hdnApp.selectMode('solo')">
                            <input type="radio" name="mode" value="solo" id="modeSolo">
                            <label for="modeSolo" style="cursor: pointer; margin: 0;">
                                <h3 style="color: #343973; margin: 0;">üë§ Solo</h3>
                                <p style="margin-top: 5px; color: #666;">Jouer seul</p>
                            </label>
                        </div>
                        <div class="radio-option" onclick="hdnApp.selectMode('team')">
                            <input type="radio" name="mode" value="team" id="modeTeam">
                            <label for="modeTeam" style="cursor: pointer; margin: 0;">
                                <h3 style="color: #343973; margin: 0;">üë• √âquipe</h3>
                                <p style="margin-top: 5px; color: #666;">Jouer en √©quipe</p>
                            </label>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToChoice()">
                        ‚Üê Retour
                    </button>
                </div>

                <!-- Solo Registration Form (hidden) -->
                <div id="soloForm" class="hidden">
                    <h3>üìù Inscription Solo</h3>
                    <label>Pseudo *</label>
                    <input type="text" id="soloPseudo" placeholder="Ton pseudo" />

                    <label>Mot de passe (6 chiffres) *</label>
                    <div class="password-container">
                        <input type="password" id="soloPassword" placeholder="123456" maxlength="6"
                               inputmode="numeric" pattern="[0-9]*"
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                        <button type="button" class="password-toggle"
                                onclick="togglePassword('soloPassword', this)">üëÅÔ∏è</button>
                    </div>

                    <button class="btn btn-success" style="width: 100%; margin-top: 15px;"
                            onclick="hdnApp.registerSolo()">
                        ‚úÖ S'inscrire Solo
                    </button>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToRegisterChoice()">
                        ‚Üê Retour
                    </button>
                </div>

                <!-- Team Action Selection (hidden) -->
                <div id="teamActionSelection" class="hidden">
                    <h3 style="text-align: center;">√âquipe</h3>
                    <div class="radio-group">
                        <div class="radio-option" onclick="hdnApp.selectTeamAction('create')">
                            <input type="radio" name="teamAction" value="create" id="actionCreate">
                            <label for="actionCreate" style="cursor: pointer; margin: 0;">
                                <h3 style="color: #343973; margin: 0;">‚ûï Cr√©er</h3>
                                <p style="margin-top: 5px; color: #666;">Nouvelle √©quipe</p>
                            </label>
                        </div>
                        <div class="radio-option" onclick="hdnApp.selectTeamAction('join')">
                            <input type="radio" name="teamAction" value="join" id="actionJoin">
                            <label for="actionJoin" style="cursor: pointer; margin: 0;">
                                <h3 style="color: #343973; margin: 0;">üîó Rejoindre</h3>
                                <p style="margin-top: 5px; color: #666;">√âquipe existante</p>
                            </label>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToRegisterChoice()">
                        ‚Üê Retour
                    </button>
                </div>

                <!-- Create Team Form (hidden) -->
                <div id="createTeamForm" class="hidden">
                    <h3>‚ûï Cr√©er une √âquipe</h3>
                    <label>Nom de l'√©quipe *</label>
                    <input type="text" id="teamName" placeholder="Les champions" />

                    <label>Ton pseudo *</label>
                    <input type="text" id="teamPlayerPseudo" placeholder="Ton pseudo" />

                    <label>Mot de passe (6 chiffres) *</label>
                    <div class="password-container">
                        <input type="password" id="teamPassword" placeholder="123456" maxlength="6"
                               inputmode="numeric" pattern="[0-9]*"
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                        <button type="button" class="password-toggle"
                                onclick="togglePassword('teamPassword', this)">üëÅÔ∏è</button>
                    </div>

                    <button class="btn btn-success" style="width: 100%; margin-top: 15px;"
                            onclick="hdnApp.createTeam()">
                        üéØ Cr√©er l'√©quipe
                    </button>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToTeamAction()">
                        ‚Üê Retour
                    </button>
                </div>

                <!-- Join Team Form (hidden) -->
                <div id="joinTeamForm" class="hidden">
                    <h3>üîó Rejoindre une √âquipe</h3>
                    <label>Code de l'√©quipe *</label>
                    <input type="text" id="teamCode" placeholder="Ex: HDN-ABC123" />

                    <label>Ton pseudo *</label>
                    <input type="text" id="joinTeamPseudo" placeholder="Ton pseudo" />

                    <label>Mot de passe (6 chiffres) *</label>
                    <div class="password-container">
                        <input type="password" id="joincreateTeamPassword" placeholder="123456" maxlength="6"
                               inputmode="numeric" pattern="[0-9]*"
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                        <button type="button" class="password-toggle"
                                onclick="togglePassword('joincreateTeamPassword', this)">üëÅÔ∏è</button>
                    </div>

                    <button class="btn btn-success" style="width: 100%; margin-top: 15px;" onclick="hdnApp.joinTeam()">
                        üöÄ Rejoindre
                    </button>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 10px;"
                            onclick="hdnApp.backToTeamAction()">
                        ‚Üê Retour
                    </button>
                </div>
            </div>
        </div>

        <!-- HOME SECTION -->
        <div class="section" id="home-section">
            <div class="card">
                <h2>üè† Tableau de bord</h2>

                <!-- Countdown Timer -->
                <div class="timer" id="countdownTimer">
                    <p>‚è≥ Aucune √©nigme programm√©e</p>
                </div>

                <!-- User Stats -->
                <div class="stats-grid">
                    <div class="stat-box">
                        <h3 id="userPoints">0</h3>
                        <p>Points</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="userSolved">0</h3>
                        <p>√ânigmes r√©solues</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="userRank">-</h3>
                        <p>Classement</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ENIGMES SECTION -->
        <div class="section" id="enigmes-section">
            <div class="card">
                <h2>üí° √ânigmes</h2>
                <div id="enigmesList" class="loading">Chargement...</div>
            </div>
        </div>

        <!-- RANKING SECTION -->
        <div class="section" id="ranking-section">
            <div class="card">
                <h2>üèÜ Classement</h2>
                <div id="rankingList" class="loading">Chargement...</div>
            </div>
        </div>

        <!-- RULES SECTION -->
        <div class="section" id="rules-section">
            <div class="card">
                <h2>üìã R√®gles du Jeu</h2>

                <h3>üéØ Objectif</h3>
                <p>R√©soudre un maximum d'√©nigmes pour accumuler des points et grimper dans le classement !</p>

                <h3>üéÆ Comment jouer</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>R√©solvez l'√©nigme et soumettez votre r√©ponse</li>
                    <li>La soumission des √©ngimes se fait uniquement entre 12h et 14h en semaine. (Si l'envie vous
                        prends, vous pouvez jouer le weekend sans probl√®me)</li>
                    <li>Une fois valid√©e, l'emplacement du QR code est r√©v√©l√©</li>
                    <li>Scannez le QR code pour gagner vos points !</li>
                </ul>

                <h3>üíé Syst√®me de Points</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><strong>1√®re place :</strong> 200 points ü•á</li>
                    <li><strong>2√®me place :</strong> 150 points ü•à</li>
                    <li><strong>3√®me place :</strong> 100 points ü•â</li>
                    <li><strong>4√®me+ :</strong> 50 points</li>
                    <li>‚ö†Ô∏è Les points sont calcul√©s AU MOMENT o√π tu scannes le QR code !</li>
                    <li>üí° Tu ne connais tes points qu'APR√àS avoir scann√© le QR</li>
                </ul>

                <h3>üí° Indices</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>3 indices disponibles par √©nigme</li>
                    <li>Le 1er indice co√ªte <strong>5 points</strong></li>
                    <li>Le 2√®me indice co√ªte <strong>15 points</strong></li>
                    <li>Le 3√®me indice co√ªte <strong>30 points</strong></li>
                    <li>Les indices se d√©bloquent progressivement</li>
                </ul>

                <h3>üîí Lockout</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Apr√®s <strong>3 mauvaises r√©ponses</strong>, l'√©nigme est bloqu√©e</li>
                    <li>Temps de blocage : <strong>15 minutes</strong></li>
                    <li>Je vous conseil donc de bien r√©fl√©chir avant de soumettre votre r√©ponse</li>
                </ul>

                <h3>üë• Mode √âquipe</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Les points sont partag√©s entre les membres</li>
                    <li>Si un membre de l'√©quipe valide l'√©nigme, elle se valdie aussi pour les autres membres</li>
                    <li>De la m√™me fa√ßon, si un membre de l'√©quipe demande un indice, il s'affiche pour tous les membres
                    </li>
                    <li>Vous pouvez voir les performances individuelles dans vos statistiques de compte</li>
                </ul>

                <h3>üì± QR Codes</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Apr√®s validation de la r√©ponse, l'emplacement du QR est r√©v√©l√©</li>
                    <li>Trouvez et scannez le QR code pour gagner vos points (Si vous trouvez un autre QR Code, inutile
                        de le scanner, c'est un QR code unique par √©nigme üòã)</li>
                    <li>C'est une course ! Le premier √† scanner gagne le plus de points !</li>
                </ul>

                <div class="alert alert-info" style="margin-top: 20px;">
                    <strong>üìÖ Dates importantes :</strong><br>
                    ‚Ä¢ D√©but : 25 novembre 2025<br>
                    ‚Ä¢ Fin : 08 d√©cembre 2025<br>
                </div>
            </div>
        </div>

        <!-- ADMIN SECTION -->
        <div class="section" id="admin-section"></div>

        <script>
            function a0_0x53f5(_0x46f11d, _0xfbb6cf) { const _0x211b9a = a0_0x211b(); return a0_0x53f5 = function (_0x53f5a2, _0x151274) { _0x53f5a2 = _0x53f5a2 - 0xb8; let _0x54228a = _0x211b9a[_0x53f5a2]; if (a0_0x53f5['MouxyE'] === undefined) { var _0x50716f = function (_0x12da9b) { const _0x2cc6f3 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; let _0x4e6ea6 = '', _0x123bfb = ''; for (let _0x321b4d = 0x0, _0x47d08e, _0x2d2482, _0x4b3b2b = 0x0; _0x2d2482 = _0x12da9b['charAt'](_0x4b3b2b++); ~_0x2d2482 && (_0x47d08e = _0x321b4d % 0x4 ? _0x47d08e * 0x40 + _0x2d2482 : _0x2d2482, _0x321b4d++ % 0x4) ? _0x4e6ea6 += String['fromCharCode'](0xff & _0x47d08e >> (-0x2 * _0x321b4d & 0x6)) : 0x0) { _0x2d2482 = _0x2cc6f3['indexOf'](_0x2d2482); } for (let _0x12868f = 0x0, _0x500acc = _0x4e6ea6['length']; _0x12868f < _0x500acc; _0x12868f++) { _0x123bfb += '%' + ('00' + _0x4e6ea6['charCodeAt'](_0x12868f)['toString'](0x10))['slice'](-0x2); } return decodeURIComponent(_0x123bfb); }; a0_0x53f5['ZeWMyk'] = _0x50716f, _0x46f11d = arguments, a0_0x53f5['MouxyE'] = !![]; } const _0x3f159c = _0x211b9a[0x0], _0x4d928b = _0x53f5a2 + _0x3f159c, _0x23eae8 = _0x46f11d[_0x4d928b]; return !_0x23eae8 ? (_0x54228a = a0_0x53f5['ZeWMyk'](_0x54228a), _0x46f11d[_0x4d928b] = _0x54228a) : _0x54228a = _0x23eae8, _0x54228a; }, a0_0x53f5(_0x46f11d, _0xfbb6cf); } const a0_0xf1eaef = a0_0x53f5; (function (_0x33b904, _0x5a3295) { const _0x76bfa4 = a0_0x53f5, _0x215530 = _0x33b904(); while (!![]) { try { const _0x7a7512 = -parseInt(_0x76bfa4(0xc7)) / 0x1 + -parseInt(_0x76bfa4(0xc6)) / 0x2 + -parseInt(_0x76bfa4(0x168)) / 0x3 * (-parseInt(_0x76bfa4(0x1cf)) / 0x4) + -parseInt(_0x76bfa4(0x1aa)) / 0x5 * (-parseInt(_0x76bfa4(0x1db)) / 0x6) + parseInt(_0x76bfa4(0x1a8)) / 0x7 * (parseInt(_0x76bfa4(0xd5)) / 0x8) + parseInt(_0x76bfa4(0x1b5)) / 0x9 + -parseInt(_0x76bfa4(0x1ad)) / 0xa; if (_0x7a7512 === _0x5a3295) break; else _0x215530['push'](_0x215530['shift']()); } catch (_0x3267e0) { _0x215530['push'](_0x215530['shift']()); } } }(a0_0x211b, 0x27eda)); const SUPABASE_URL = 'https://kjziudxhzbwhhnwvmlkt.supabase.co', SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqeml1ZHhoemJ3aGhud3ZtbGt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzOTg1MTIsImV4cCI6MjA3ODk3NDUxMn0.clKFjIPw6bO_-VI5epj1Fg7TlXUAAeqgYH4bCMS-uP4', supabase = window['supabase'][a0_0xf1eaef(0x157)](SUPABASE_URL, SUPABASE_KEY); function togglePassword(_0x12da9b, _0x2cc6f3) { const _0x365f77 = a0_0xf1eaef, _0x4e6ea6 = document['getElementById'](_0x12da9b); _0x4e6ea6[_0x365f77(0x171)] === 'password' ? (_0x4e6ea6[_0x365f77(0x171)] = _0x365f77(0xbc), _0x2cc6f3[_0x365f77(0x1f4)] = 'üôà') : (_0x4e6ea6[_0x365f77(0x171)] = _0x365f77(0x185), _0x2cc6f3['textContent'] = 'üëÅÔ∏è'); } function showToast(_0x123bfb, _0x321b4d = a0_0xf1eaef(0x1a5)) { const _0x38ddbb = a0_0xf1eaef, _0x47d08e = document['querySelector'](_0x38ddbb(0xc5)); if (_0x47d08e) _0x47d08e[_0x38ddbb(0x1c7)](); const _0x2d2482 = document['createElement']('div'); _0x2d2482[_0x38ddbb(0xcd)] = _0x38ddbb(0xc2) + _0x321b4d, _0x2d2482[_0x38ddbb(0x1f4)] = _0x123bfb, document[_0x38ddbb(0x170)]['appendChild'](_0x2d2482), setTimeout(() => { const _0x3eba4e = _0x38ddbb; _0x2d2482[_0x3eba4e(0x1ec)][_0x3eba4e(0x18d)] = _0x3eba4e(0x1f1), setTimeout(() => _0x2d2482['remove'](), 0x12c); }, 0xfa0); } function toParisTime(_0x4b3b2b) { const _0x372aba = a0_0xf1eaef; if (!_0x4b3b2b) return null; const _0x12868f = new Date(_0x4b3b2b); return new Date(_0x12868f[_0x372aba(0x12d)]('en-US', { 'timeZone': _0x372aba(0x163) })); } function formatParisDateTime(_0x500acc) { const _0xbdcecc = a0_0xf1eaef; if (!_0x500acc) return ''; const _0x4b65ab = toParisTime(_0x500acc); return _0x4b65ab['toLocaleString'](_0xbdcecc(0xc3), { 'day': _0xbdcecc(0x16b), 'month': '2-digit', 'year': 'numeric', 'hour': '2-digit', 'minute': _0xbdcecc(0x16b) }); } async function hashPassword(_0x1c15c5) { const _0x46be7e = a0_0xf1eaef, _0x2b13f0 = new TextEncoder(), _0x39dc43 = _0x2b13f0['encode'](_0x1c15c5 + _0x46be7e(0x17a)), _0x143025 = await crypto['subtle']['digest']('SHA-256', _0x39dc43), _0x32144f = Array[_0x46be7e(0x19e)](new Uint8Array(_0x143025)); return _0x32144f['map'](_0x45a618 => _0x45a618[_0x46be7e(0xff)](0x10)[_0x46be7e(0x16d)](0x2, '0'))['join'](''); } const hdnApp = { 'currentUser': null, 'selectedMode': null, 'selectedTeamAction': null, 'qrScanner': null, 'countdownInterval': null, 'currentScanEnigmaId': null, 'convertLocalToUTC'(_0x3e545) { const _0x59209f = a0_0xf1eaef; if (!_0x3e545) return null; const _0x33c458 = new Date(_0x3e545); return _0x33c458[_0x59209f(0xf7)](); }, 'isEnigmaAccessAllowed'() { const _0x5a6726 = a0_0xf1eaef; if (this[_0x5a6726(0x136)]?.[_0x5a6726(0x189)]) return !![]; const _0x7dfbe8 = new Date(), _0x6e4fff = _0x7dfbe8['getDay'](), _0x4e18f7 = _0x7dfbe8[_0x5a6726(0x1dc)](); return _0x4e18f7 >= 0xc && _0x4e18f7 < 0x16; }, 'updateEnigmaButtonState'() { const _0x3ef5cd = a0_0xf1eaef, _0x373d2b = document[_0x3ef5cd(0xdb)]('enigmaNavBtn'); console['log'](_0x3ef5cd(0x1ed), _0x373d2b); if (!_0x373d2b) { console['error']('‚ùå\x20Bouton\x20√ânigmes\x20non\x20trouv√©\x20!'); return; } const _0xfae376 = this[_0x3ef5cd(0xb8)](); console['log'](_0x3ef5cd(0x114), _0xfae376), _0xfae376 ? (console[_0x3ef5cd(0x1b7)](_0x3ef5cd(0x188)), _0x373d2b['disabled'] = ![], _0x373d2b['style'][_0x3ef5cd(0xfd)] = '1', _0x373d2b[_0x3ef5cd(0x1ec)][_0x3ef5cd(0x11c)] = _0x3ef5cd(0x155), _0x373d2b[_0x3ef5cd(0x1e1)] = () => this[_0x3ef5cd(0x1ba)](_0x3ef5cd(0xc1))) : (console['log'](_0x3ef5cd(0xe0)), _0x373d2b[_0x3ef5cd(0xc0)] = !![], _0x373d2b[_0x3ef5cd(0x1ec)][_0x3ef5cd(0xfd)] = _0x3ef5cd(0x1ff), _0x373d2b[_0x3ef5cd(0x1ec)][_0x3ef5cd(0x11c)] = 'not-allowed', _0x373d2b['style'][_0x3ef5cd(0x115)] = _0x3ef5cd(0xd2), _0x373d2b[_0x3ef5cd(0x1e1)] = _0x23ee8f => { const _0x1dd46a = _0x3ef5cd; _0x23ee8f[_0x1dd46a(0x1ac)](), _0x23ee8f['stopPropagation'](), showToast('‚è∞\x20Les\x20√©nigmes\x20sont\x20accessibles\x20uniquement\x20entre\x2012h\x20et\x2014h\x20en\x20semaine\x20!', _0x1dd46a(0x17e)); }), console[_0x3ef5cd(0x1b7)]('√âtat\x20final\x20du\x20bouton:', { 'disabled': _0x373d2b[_0x3ef5cd(0xc0)], 'opacity': _0x373d2b['style']['opacity'], 'cursor': _0x373d2b[_0x3ef5cd(0x1ec)][_0x3ef5cd(0x11c)] }); }, 'showRulesModal'() { const _0x15674a = a0_0xf1eaef, _0x5d63b9 = document['createElement']('div'); _0x5d63b9['className'] = 'rules-modal', _0x5d63b9[_0x15674a(0x1e1)] = _0x1be2b5 => { if (_0x1be2b5['target'] === _0x5d63b9) this['closeRulesModal'](); }, _0x5d63b9['innerHTML'] = _0x15674a(0x1dd), document[_0x15674a(0x170)][_0x15674a(0x199)](_0x5d63b9); const _0x553b28 = document['getElementById'](_0x15674a(0x109)), _0x4d68a1 = document[_0x15674a(0xdb)](_0x15674a(0xd8)); _0x4d68a1[_0x15674a(0x1ca)] = _0x553b28[_0x15674a(0x1ca)]; }, 'closeRulesModal'() { const _0x2cc654 = a0_0xf1eaef, _0x1d1b75 = document['querySelector']('.rules-modal'); _0x1d1b75 && _0x1d1b75[_0x2cc654(0x1c7)](); }, async 'init'() { const _0x51b054 = a0_0xf1eaef; console[_0x51b054(0x1b7)]('üéÑ\x20HDN\x20Christmas\x20App\x20Starting...'); const _0x46fab2 = localStorage[_0x51b054(0x1e3)](_0x51b054(0x15f)); _0x46fab2 && (this[_0x51b054(0x136)] = JSON[_0x51b054(0x161)](_0x46fab2), await this['loadUserData'](), this['showMainApp']()), this[_0x51b054(0x1d3)](); }, 'showLogin'() { const _0x568be9 = a0_0xf1eaef; document[_0x568be9(0xdb)](_0x568be9(0x107))[_0x568be9(0x145)][_0x568be9(0xef)](_0x568be9(0x1d0)), document['getElementById'](_0x568be9(0x1a2))['classList'][_0x568be9(0x1c7)](_0x568be9(0x1d0)); }, 'showRegister'() { const _0x2a2b46 = a0_0xf1eaef; document[_0x2a2b46(0xdb)]('authChoice')[_0x2a2b46(0x145)]['add']('hidden'), document[_0x2a2b46(0xdb)](_0x2a2b46(0x1af))[_0x2a2b46(0x145)][_0x2a2b46(0x1c7)](_0x2a2b46(0x1d0)); }, 'backToChoice'() { const _0x9c05c4 = a0_0xf1eaef; document[_0x9c05c4(0xdb)]('loginForm')['classList']['add']('hidden'), document[_0x9c05c4(0xdb)]('registerChoice')['classList']['add'](_0x9c05c4(0x1d0)), document['getElementById']('authChoice')[_0x9c05c4(0x145)][_0x9c05c4(0x1c7)](_0x9c05c4(0x1d0)), document['getElementById']('loginPseudo')[_0x9c05c4(0x154)] = '', document['getElementById']('loginPassword')[_0x9c05c4(0x154)] = ''; }, 'backToRegisterChoice'() { const _0x30dd11 = a0_0xf1eaef; document[_0x30dd11(0xdb)](_0x30dd11(0x1c0))[_0x30dd11(0x145)][_0x30dd11(0xef)]('hidden'), document['getElementById']('teamActionSelection')[_0x30dd11(0x145)]['add'](_0x30dd11(0x1d0)), document['getElementById']('registerChoice')[_0x30dd11(0x145)]['remove'](_0x30dd11(0x1d0)), document['getElementById']('soloPseudo')[_0x30dd11(0x154)] = '', document['getElementById'](_0x30dd11(0x19b))['value'] = ''; }, 'backToTeamAction'() { const _0x3d0054 = a0_0xf1eaef; document[_0x3d0054(0xdb)](_0x3d0054(0x1f9))[_0x3d0054(0x145)][_0x3d0054(0xef)](_0x3d0054(0x1d0)), document[_0x3d0054(0xdb)]('joinTeamForm')['classList']['add'](_0x3d0054(0x1d0)), document['getElementById'](_0x3d0054(0x206))['classList']['remove'](_0x3d0054(0x1d0)); }, 'selectMode'(_0x145c9b) { const _0x33942d = a0_0xf1eaef; this[_0x33942d(0xfb)] = _0x145c9b, document[_0x33942d(0x194)](_0x33942d(0x12a))['forEach'](_0x15c27e => { const _0x3e7a25 = _0x33942d; _0x15c27e['classList'][_0x3e7a25(0x1c7)]('active'); }), event[_0x33942d(0x1b4)][_0x33942d(0x13e)](_0x33942d(0x1bd))[_0x33942d(0x145)]['add']('active'); if (_0x145c9b === _0x33942d(0x1c5)) document['getElementById']('registerChoice')['classList'][_0x33942d(0xef)](_0x33942d(0x1d0)), document[_0x33942d(0xdb)](_0x33942d(0x1c0))['classList'][_0x33942d(0x1c7)](_0x33942d(0x1d0)), document['getElementById']('teamActionSelection')[_0x33942d(0x145)][_0x33942d(0xef)](_0x33942d(0x1d0)); else _0x145c9b === _0x33942d(0x14a) && (document['getElementById'](_0x33942d(0x1af))['classList']['add']('hidden'), document[_0x33942d(0xdb)](_0x33942d(0x206))['classList']['remove'](_0x33942d(0x1d0)), document['getElementById']('soloForm')[_0x33942d(0x145)][_0x33942d(0xef)](_0x33942d(0x1d0))); }, 'selectTeamAction'(_0x4ad033) { const _0x2996e9 = a0_0xf1eaef; this['selectedTeamAction'] = _0x4ad033, document['querySelectorAll']('#teamActionSelection\x20.radio-option')[_0x2996e9(0x14b)](_0x1f294e => { const _0x273444 = _0x2996e9; _0x1f294e[_0x273444(0x145)]['remove']('active'); }), event[_0x2996e9(0x1b4)]['closest']('.radio-option')['classList'][_0x2996e9(0xef)](_0x2996e9(0x129)), setTimeout(() => { const _0x1230ba = _0x2996e9; document[_0x1230ba(0xdb)]('teamActionSelection')[_0x1230ba(0x145)][_0x1230ba(0xef)](_0x1230ba(0x1d0)), _0x4ad033 === _0x1230ba(0xd0) ? document['getElementById'](_0x1230ba(0x1f9))['classList']['remove'](_0x1230ba(0x1d0)) : document[_0x1230ba(0xdb)](_0x1230ba(0xd1))['classList'][_0x1230ba(0x1c7)](_0x1230ba(0x1d0)); }, 0xc8); }, async 'registerSolo'() { const _0x546d7a = a0_0xf1eaef, _0x4aa1fc = document[_0x546d7a(0xdb)]('soloPseudo')[_0x546d7a(0x154)]['trim'](), _0x644a38 = document['getElementById']('soloPassword')['value']; if (!_0x4aa1fc || !_0x644a38) { showToast('Veuillez\x20remplir\x20tous\x20les\x20champs', _0x546d7a(0x17d)); return; } if (_0x644a38[_0x546d7a(0x131)] !== 0x6 || !/^\d+$/['test'](_0x644a38)) { showToast('Le\x20mot\x20de\x20passe\x20doit\x20contenir\x20exactement\x206\x20chiffres', _0x546d7a(0x17d)); return; } try { const _0x3e9d51 = await hashPassword(_0x644a38), { data: _0x270f70, error: _0x34e592 } = await supabase[_0x546d7a(0x19e)]('players')['insert']([{ 'pseudo': _0x4aa1fc, 'password': _0x3e9d51, 'type': 'solo', 'points': 0x0, 'is_test': ![] }])[_0x546d7a(0x18a)]('id,\x20pseudo,\x20type,\x20points,\x20team_id,\x20is_admin,\x20is_test')['single'](); if (_0x34e592) throw _0x34e592; localStorage['setItem'](_0x546d7a(0x1d6), _0x270f70['id']), localStorage['setItem'](_0x546d7a(0x103), _0x270f70[_0x546d7a(0x1c4)]), localStorage['setItem'](_0x546d7a(0x19f), _0x546d7a(0x1c5)), this['currentUser'] = _0x270f70, localStorage['setItem'](_0x546d7a(0x15f), JSON['stringify'](_0x270f70)), showToast(_0x546d7a(0x11a) + _0x270f70[_0x546d7a(0x1c4)] + '\x20!', 'success'), await this['loadUserData'](), this['showMainApp'](); } catch (_0x2fab09) { console['error']('Erreur\x20inscription\x20solo:', _0x2fab09), _0x2fab09['code'] === '23505' ? showToast('Ce\x20pseudo\x20est\x20d√©j√†\x20utilis√©', 'error') : showToast(_0x546d7a(0x13d) + _0x2fab09['message'], _0x546d7a(0x17d)); } }, async 'createTeam'() { const _0x9ce055 = a0_0xf1eaef, _0x1e8402 = document[_0x9ce055(0xdb)]('teamName')[_0x9ce055(0x154)][_0x9ce055(0x138)](), _0x1fc2a1 = document['getElementById']('teamPlayerPseudo')['value'][_0x9ce055(0x138)](), _0x2a3572 = document['getElementById']('teamPassword')[_0x9ce055(0x154)]; if (!_0x1e8402 || !_0x1fc2a1 || !_0x2a3572) { showToast(_0x9ce055(0x1fd), _0x9ce055(0x17d)); return; } if (_0x2a3572[_0x9ce055(0x131)] !== 0x6 || !/^\d+$/['test'](_0x2a3572)) { showToast('Le\x20mot\x20de\x20passe\x20doit\x20contenir\x20exactement\x206\x20chiffres', _0x9ce055(0x17d)); return; } try { const { data: _0x1c1040 } = await supabase['from'](_0x9ce055(0x167))[_0x9ce055(0x18a)]('id')['eq'](_0x9ce055(0x1c4), _0x1fc2a1)[_0x9ce055(0x14d)](); if (_0x1c1040) { showToast(_0x9ce055(0xbb), _0x9ce055(0x17d)); return; } const _0x5ac48d = Math[_0x9ce055(0x1da)]()['toString'](0x24)[_0x9ce055(0xfe)](0x2, 0x8)['toUpperCase'](), _0x180a8b = await hashPassword(_0x2a3572), { data: _0x33a542, error: _0x3c1ba6 } = await supabase['from'](_0x9ce055(0x167))[_0x9ce055(0xcf)]([{ 'pseudo': _0x1fc2a1, 'password': _0x180a8b, 'type': _0x9ce055(0x14a), 'team_id': null, 'points': 0x0, 'is_admin': ![], 'is_test': ![] }])['select']('id,\x20pseudo,\x20type,\x20points,\x20team_id,\x20is_admin,\x20is_test')[_0x9ce055(0x130)](); if (_0x3c1ba6) throw _0x3c1ba6; const { data: _0x1e9d53, error: _0x1eee04 } = await supabase['from']('teams')[_0x9ce055(0xcf)]([{ 'name': _0x1e8402, 'code': _0x5ac48d, 'leader': _0x33a542['id'] }])['select']()[_0x9ce055(0x130)](); if (_0x1eee04) { await supabase[_0x9ce055(0x19e)]('players')[_0x9ce055(0x1fe)]()['eq']('id', _0x33a542['id']); throw _0x1eee04; } const { error: _0x16fdb5 } = await supabase[_0x9ce055(0x19e)]('players')['update']({ 'team_id': _0x1e9d53['id'] })['eq']('id', _0x33a542['id']); if (_0x16fdb5) { await supabase[_0x9ce055(0x19e)](_0x9ce055(0x1f3))['delete']()['eq']('id', _0x1e9d53['id']), await supabase[_0x9ce055(0x19e)]('players')[_0x9ce055(0x1fe)]()['eq']('id', _0x33a542['id']); throw _0x16fdb5; } _0x33a542['team_id'] = _0x1e9d53['id'], this[_0x9ce055(0x136)] = _0x33a542, localStorage[_0x9ce055(0x148)](_0x9ce055(0x15f), JSON['stringify'](_0x33a542)), showToast('‚úÖ\x20√âquipe\x20cr√©√©e\x20!\x20Code\x20:\x20' + _0x1e9d53[_0x9ce055(0xea)], _0x9ce055(0x203)), await this[_0x9ce055(0xf0)](), this['showMainApp'](); } catch (_0x4baf78) { console[_0x9ce055(0x17d)](_0x9ce055(0x193), _0x4baf78), _0x4baf78[_0x9ce055(0xea)] === _0x9ce055(0xd9) ? showToast(_0x9ce055(0xee), _0x9ce055(0x17d)) : showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20cr√©ation\x20:\x20' + _0x4baf78['message'], _0x9ce055(0x17d)); } }, async 'joinTeam'() { const _0x2903b = a0_0xf1eaef, _0x1c933a = document['getElementById']('teamCode')[_0x2903b(0x154)][_0x2903b(0x138)](), _0x1b558a = document[_0x2903b(0xdb)](_0x2903b(0x120))[_0x2903b(0x154)][_0x2903b(0x138)](), _0x341353 = document[_0x2903b(0xdb)](_0x2903b(0x1e7))['value'][_0x2903b(0x138)](); if (!_0x1c933a || !_0x1b558a || !_0x341353) { showToast(_0x2903b(0x187), _0x2903b(0x17d)); return; } if (_0x341353['length'] !== 0x6 || !/^\d{6}$/[_0x2903b(0xde)](_0x341353)) { showToast('‚ùå\x20Le\x20mot\x20de\x20passe\x20doit\x20contenir\x20exactement\x206\x20chiffres\x20!', _0x2903b(0x17d)); return; } try { const { data: _0x13d224, error: _0x333935 } = await supabase[_0x2903b(0x19e)](_0x2903b(0x1f3))['select'](_0x2903b(0x149))['eq']('code', _0x1c933a[_0x2903b(0x1a3)]())[_0x2903b(0x14d)](); if (!_0x13d224) { showToast(_0x2903b(0xbd), _0x2903b(0x17d)); return; } const { data: _0x47b186 } = await supabase[_0x2903b(0x19e)]('players')['select']('id')['eq']('pseudo', _0x1b558a)['maybeSingle'](); if (_0x47b186) { showToast('‚ùå\x20Ce\x20pseudo\x20existe\x20d√©j√†\x20!', _0x2903b(0x17d)); return; } const _0x5b90de = await hashPassword(_0x341353), { data: _0x23d1be, error: _0x5ebe1a } = await supabase[_0x2903b(0x19e)]('players')['insert']([{ 'pseudo': _0x1b558a, 'password': _0x5b90de, 'team_id': _0x13d224['id'], 'points': 0x0, 'is_admin': ![], 'is_test': ![], 'type': 'team' }])['select'](_0x2903b(0x19c))[_0x2903b(0x130)](); if (_0x5ebe1a) throw _0x5ebe1a; showToast(_0x2903b(0x15c) + _0x13d224[_0x2903b(0x12f)] + '\x22\x20!', _0x2903b(0x203)), this[_0x2903b(0x136)] = _0x23d1be, localStorage[_0x2903b(0x148)](_0x2903b(0x15f), JSON[_0x2903b(0x1ef)](_0x23d1be)), await this['loadUserData'](), this['showMainApp'](); } catch (_0x5ba125) { console[_0x2903b(0x17d)]('Error:', _0x5ba125), showToast(_0x2903b(0x14f) + _0x5ba125['message'], _0x2903b(0x17d)); } }, async 'login'() { const _0xcc5c6a = a0_0xf1eaef, _0x1d7b28 = document[_0xcc5c6a(0xdb)](_0xcc5c6a(0x15e))['value']['trim'](), _0x2dc24e = document[_0xcc5c6a(0xdb)](_0xcc5c6a(0x1e4))[_0xcc5c6a(0x154)][_0xcc5c6a(0x138)](); if (!_0x1d7b28 || !_0x2dc24e) { showToast(_0xcc5c6a(0x187), _0xcc5c6a(0x17d)); return; } try { const _0x1e831e = await hashPassword(_0x2dc24e), { data: _0x4b9d37, error: _0x2c504e } = await supabase['from'](_0xcc5c6a(0x167))[_0xcc5c6a(0x18a)]('id,\x20pseudo,\x20type,\x20points,\x20team_id,\x20is_admin,\x20is_test')['eq']('pseudo', _0x1d7b28)['eq'](_0xcc5c6a(0x185), _0x1e831e)[_0xcc5c6a(0x14d)](); if (!_0x4b9d37) { showToast(_0xcc5c6a(0x18f), 'error'); return; } this['currentUser'] = _0x4b9d37, localStorage['setItem'](_0xcc5c6a(0x15f), JSON['stringify'](_0x4b9d37)), await this[_0xcc5c6a(0xf0)](), this['showMainApp'](), showToast('‚úÖ\x20Connexion\x20r√©ussie\x20!', 'success'); } catch (_0x40571f) { console[_0xcc5c6a(0x17d)](_0xcc5c6a(0x146), _0x40571f), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20connexion', _0xcc5c6a(0x17d)); } }, async 'loadUserData'() { const _0x3f3ce0 = a0_0xf1eaef; if (!this[_0x3f3ce0(0x136)]) return; try { const { data: _0x3df89d } = await supabase['from']('players')[_0x3f3ce0(0x18a)]('id,\x20pseudo,\x20type,\x20points,\x20team_id,\x20is_admin,\x20is_test')['eq']('id', this[_0x3f3ce0(0x136)]['id'])['maybeSingle'](); _0x3df89d && (this[_0x3f3ce0(0x136)] = _0x3df89d, localStorage['setItem']('hdnCurrentUser', JSON['stringify'](_0x3df89d))); document['getElementById']('userPseudo')[_0x3f3ce0(0x1f4)] = this[_0x3f3ce0(0x136)][_0x3f3ce0(0x1c4)], document[_0x3f3ce0(0xdb)](_0x3f3ce0(0xe5))[_0x3f3ce0(0x1f4)] = this['currentUser']['points'] || 0x0; if (this[_0x3f3ce0(0x136)]['team_id']) { const { data: _0x388f1f } = await supabase['from'](_0x3f3ce0(0x1f3))['select'](_0x3f3ce0(0x149))['eq']('id', this[_0x3f3ce0(0x136)]['team_id'])['maybeSingle'](); _0x388f1f && (document[_0x3f3ce0(0xdb)](_0x3f3ce0(0x116))[_0x3f3ce0(0x1f4)] = '√âquipe:\x20' + _0x388f1f[_0x3f3ce0(0x12f)] + '\x20-\x20Code:\x20' + _0x388f1f['code']); } else document['getElementById'](_0x3f3ce0(0x116))['textContent'] = 'Solo'; let _0x50fdc3 = supabase['from']('enigma_progress')[_0x3f3ce0(0x18a)]('id', { 'count': 'exact' })['eq'](_0x3f3ce0(0x183), !![]); this['currentUser'][_0x3f3ce0(0x121)] ? _0x50fdc3 = _0x50fdc3['eq'](_0x3f3ce0(0x121), this[_0x3f3ce0(0x136)]['team_id']) : _0x50fdc3 = _0x50fdc3['eq'](_0x3f3ce0(0x1a6), this['currentUser']['id']); const { count: _0x8637e } = await _0x50fdc3; document['getElementById'](_0x3f3ce0(0xd4))[_0x3f3ce0(0x1f4)] = _0x8637e || 0x0, await this['calculateRank'](); } catch (_0x342176) { console[_0x3f3ce0(0x17d)]('Error\x20loading\x20user\x20data:', _0x342176); } }, async 'calculateRank'() { const _0x17deb8 = a0_0xf1eaef; try { if (this[_0x17deb8(0x136)]['team_id']) { const { data: _0x1937bb } = await supabase[_0x17deb8(0x19e)]('teams')[_0x17deb8(0x18a)]('id,\x20points')[_0x17deb8(0x1cd)](_0x17deb8(0x160), { 'ascending': ![] }), _0x222beb = _0x1937bb[_0x17deb8(0x1a1)](_0x15bc49 => _0x15bc49['id'] === this['currentUser']['team_id']) + 0x1; document[_0x17deb8(0xdb)](_0x17deb8(0x166))[_0x17deb8(0x1f4)] = _0x222beb > 0x0 ? _0x222beb : '-'; } else { const { data: _0x11c877 } = await supabase[_0x17deb8(0x19e)](_0x17deb8(0x167))[_0x17deb8(0x18a)]('id,\x20points,\x20is_test')['is'](_0x17deb8(0x121), null)['eq'](_0x17deb8(0x201), ![])[_0x17deb8(0x1cd)](_0x17deb8(0x160), { 'ascending': ![] }), _0x1a91df = _0x11c877[_0x17deb8(0x1a1)](_0x42a495 => _0x42a495['id'] === this['currentUser']['id']) + 0x1; document['getElementById'](_0x17deb8(0x166))['textContent'] = _0x1a91df > 0x0 ? _0x1a91df : '-'; } } catch (_0x20c728) { console[_0x17deb8(0x17d)](_0x17deb8(0x1ee), _0x20c728); } }, 'getAdminTemplate'() { return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>‚öôÔ∏è\x20Administration</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>üìä\x20Statistiques</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stats-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-box\x22><h3\x20id=\x22adminTotalPlayers\x22>0</h3><p>Joueurs</p></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-box\x22><h3\x20id=\x22adminTotalEnigmas\x22>0</h3><p>√ânigmes</p></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-box\x22><h3\x20id=\x22adminPendingValidations\x22>0</h3><p>En\x20attente</p></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>‚ûï\x20Cr√©er\x20une\x20√ânigme</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Titre\x20*</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22enigmaTitle\x22\x20placeholder=\x22Titre\x20de\x20l\x27√©nigme\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Description\x20*</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22enigmaDescription\x22\x20rows=\x224\x22\x20placeholder=\x22√ânonc√©\x20de\x20l\x27√©nigme\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Image\x20(URL\x20optionnelle)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22enigmaImageUrl\x22\x20placeholder=\x22https://example.com/image.jpg\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x200.85em;\x20color:\x20#666;\x20margin-top:\x205px;\x22>URL\x20de\x20l\x27image\x20√†\x20afficher\x20avec\x20l\x27√©nigme\x20(optionnel)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>R√©ponse\x20*</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22enigmaAnswer\x22\x20placeholder=\x22R√©ponse\x20correcte\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Emplacement\x20du\x20QR\x20Code\x20*</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22enigmaLocation\x22\x20placeholder=\x22Ex:\x20Pr√®s\x20de\x20la\x20fontaine,\x202√®me\x20√©tage...\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Type\x20de\x20validation</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22enigmaValidation\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22auto\x22>Automatique</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22manual\x22>Manuelle</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>üí°\x20Indices\x20(optionnels)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Indice\x201</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22enigmaHint1\x22\x20rows=\x222\x22\x20placeholder=\x22Premier\x20indice\x20(-5\x20points)\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Indice\x202</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22enigmaHint2\x22\x20rows=\x222\x22\x20placeholder=\x22Deuxi√®me\x20indice\x20(-15\x20points)\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Indice\x203</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22enigmaHint3\x22\x20rows=\x222\x22\x20placeholder=\x22Troisi√®me\x20indice\x20(-30\x20points)\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>üìÖ\x20Publication</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label><input\x20type=\x22checkbox\x22\x20id=\x22enigmaPublished\x22\x20style=\x22width:\x20auto;\x20margin-right:\x2010px;\x22\x20/>Publier\x20imm√©diatement</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22schedulePublishDiv\x22\x20style=\x22margin-top:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>üìÖ\x20Programmer\x20la\x20publication\x20(optionnel)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22datetime-local\x22\x20id=\x22enigmaSchedule\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x200.85em;\x20color:\x20#666;\x20margin-top:\x205px;\x22>Si\x20rempli,\x20l\x27√©nigme\x20sera\x20automatiquement\x20publi√©e\x20√†\x20cette\x20date/heure</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20style=\x22width:\x20100%;\x20margin-top:\x2015px;\x22\x20onclick=\x22hdnApp.createEnigma()\x22>‚úÖ\x20Cr√©er\x20l\x27√©nigme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x2030px;\x22>üìã\x20Mes\x20√ânigmes</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22adminEnigmasList\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x2030px;\x22>‚úÖ\x20Validations\x20en\x20attente</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22pendingValidationsList\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x2030px;\x22>üíæ\x20Export\x20des\x20donn√©es</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x22\x20style=\x22width:\x20100%;\x22\x20onclick=\x22hdnApp.exportData()\x22>üì•\x20Exporter\x20toutes\x20les\x20donn√©es</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; }, 'showMainApp'() { const _0x4c5f01 = a0_0xf1eaef; document[_0x4c5f01(0xdb)](_0x4c5f01(0x186))['classList'][_0x4c5f01(0x1c7)](_0x4c5f01(0x129)), document[_0x4c5f01(0xdb)]('userInfo')['classList']['remove']('hidden'), document[_0x4c5f01(0xdb)]('mainNav')['classList']['remove'](_0x4c5f01(0x1d0)); if (this[_0x4c5f01(0x136)]['is_admin']) { document['getElementById'](_0x4c5f01(0x1c6))[_0x4c5f01(0x145)]['remove']('hidden'), document[_0x4c5f01(0xdb)](_0x4c5f01(0x12b))['innerHTML'] = this['getAdminTemplate'](); const _0x5080ce = document['querySelector']('.floating-rules-btn'); _0x5080ce && (_0x5080ce['style']['display'] = 'none'); } this['showSection'](_0x4c5f01(0x1b0)); }, 'logout'() { const _0x12b01f = a0_0xf1eaef; confirm(_0x12b01f(0x19a)) && (localStorage['removeItem']('hdnCurrentUser'), location[_0x12b01f(0xdc)]()); }, 'showSection'(_0x95a7f6) { const _0x5c4406 = a0_0xf1eaef; if (_0x95a7f6 === _0x5c4406(0xc1) && !this['isEnigmaAccessAllowed']()) { showToast(_0x5c4406(0x153), _0x5c4406(0x17e)); return; } document[_0x5c4406(0x194)]('.section')['forEach'](_0x13b047 => { const _0xf44f06 = _0x5c4406; _0x13b047[_0xf44f06(0x145)]['remove']('active'); }), document[_0x5c4406(0x194)](_0x5c4406(0x113))['forEach'](_0x38a995 => { const _0x2b3752 = _0x5c4406; _0x38a995['classList'][_0x2b3752(0x1c7)]('active'); }), document['getElementById'](_0x95a7f6 + '-section')[_0x5c4406(0x145)][_0x5c4406(0xef)]('active'), event?.[_0x5c4406(0x1b4)]?.[_0x5c4406(0x145)][_0x5c4406(0xef)]('active'); if (_0x95a7f6 === _0x5c4406(0xc1)) this[_0x5c4406(0xc9)](); else { if (_0x95a7f6 === 'ranking') this['loadClassement'](); else { if (_0x95a7f6 === _0x5c4406(0xdd)) this[_0x5c4406(0x124)](); else _0x95a7f6 === 'home' && this['loadUserData'](); } } }, 'startCountdown'() { const _0x5343bf = a0_0xf1eaef; this['countdownInterval'] && clearInterval(this['countdownInterval']), this['updateCountdown'](), this[_0x5343bf(0xe3)] = setInterval(() => this['updateCountdown'](), 0x3e8); }, async 'updateCountdown'() { const _0x3a5f9a = a0_0xf1eaef; try { const { data: _0x112a16 } = await supabase[_0x3a5f9a(0x19e)]('enigmas')[_0x3a5f9a(0x18a)](_0x3a5f9a(0x165))['eq'](_0x3a5f9a(0x1c9), ![])[_0x3a5f9a(0x108)](_0x3a5f9a(0x15b), 'is', null)['order']('scheduled_at', { 'ascending': !![] })[_0x3a5f9a(0x174)](0x1)[_0x3a5f9a(0x14d)](), _0x552d66 = document[_0x3a5f9a(0xdb)](_0x3a5f9a(0x1b3)); if (!_0x112a16) { _0x552d66[_0x3a5f9a(0x1ca)] = _0x3a5f9a(0xfa); return; } const _0x715d3a = Date[_0x3a5f9a(0x106)](), _0x386a1b = new Date(_0x112a16['scheduled_at'])[_0x3a5f9a(0xbe)](), _0x4ef17b = _0x386a1b - _0x715d3a; if (_0x4ef17b <= 0x0) { _0x552d66['innerHTML'] = _0x3a5f9a(0x195); if (!_0x112a16[_0x3a5f9a(0x1c9)]) { await supabase[_0x3a5f9a(0x19e)](_0x3a5f9a(0x126))[_0x3a5f9a(0xf8)]({ 'published': !![] })['eq']('id', _0x112a16['id']); const _0x2d5ffb = document[_0x3a5f9a(0xdb)]('enigmes-section'); _0x2d5ffb && _0x2d5ffb[_0x3a5f9a(0x145)]['contains'](_0x3a5f9a(0x129)) && this['loadEnigmes'](); } return; } const _0x2cce8e = Math['floor'](_0x4ef17b / (0x3e8 * 0x3c * 0x3c * 0x18)), _0x6579ba = Math[_0x3a5f9a(0xed)](_0x4ef17b % (0x3e8 * 0x3c * 0x3c * 0x18) / (0x3e8 * 0x3c * 0x3c)), _0x337f6b = Math['floor'](_0x4ef17b % (0x3e8 * 0x3c * 0x3c) / (0x3e8 * 0x3c)), _0xf7786d = Math['floor'](_0x4ef17b % (0x3e8 * 0x3c) / 0x3e8); let _0x457df9 = ''; if (_0x2cce8e > 0x0) _0x457df9 += _0x2cce8e + 'j\x20'; _0x457df9 += _0x6579ba + 'h\x20' + _0x337f6b + 'm\x20' + _0xf7786d + 's', _0x552d66['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x201em;\x20margin-bottom:\x2010px;\x22>Prochaine\x20√©nigme\x20:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x200.9em;\x20opacity:\x200.8;\x20margin-bottom:\x205px;\x22>' + _0x112a16[_0x3a5f9a(0x142)] + _0x3a5f9a(0x11f) + _0x457df9 + '</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } catch (_0xd1b5cd) { console['error'](_0x3a5f9a(0x177), _0xd1b5cd); } }, async 'loadEnigmes'() { const _0x2c473c = a0_0xf1eaef, _0x11c852 = document['getElementById'](_0x2c473c(0xf2)); _0x11c852['innerHTML'] = _0x2c473c(0x1e9); try { const { data: _0x3d514c } = await supabase[_0x2c473c(0x19e)]('enigmas')[_0x2c473c(0x18a)](_0x2c473c(0x1ce))['eq']('published', !![])['order']('number', { 'ascending': !![] }); if (!_0x3d514c || _0x3d514c['length'] === 0x0) { _0x11c852[_0x2c473c(0x1ca)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#666;\x22>Aucune\x20√©nigme\x20disponible\x20pour\x20le\x20moment.</p>'; return; } _0x11c852['innerHTML'] = ''; for (const _0x481936 of _0x3d514c) { const _0x4eaae4 = await this[_0x2c473c(0x139)](_0x481936['id']), _0x367572 = this['isLocked'](_0x4eaae4), _0x3dae92 = document['createElement'](_0x2c473c(0xe6)); _0x3dae92['className'] = _0x2c473c(0x11d); if (_0x4eaae4 && _0x4eaae4['solved']) _0x3dae92['classList']['add'](_0x2c473c(0x183)); if (_0x367572[_0x2c473c(0x125)]) _0x3dae92['classList']['add']('locked'); let _0x57fad8 = _0x2c473c(0x16c) + _0x481936[_0x2c473c(0x141)] + _0x2c473c(0x17c) + _0x481936['title'] + '</h3>'; _0x367572[_0x2c473c(0x125)] && (_0x57fad8 += _0x2c473c(0x1c1) + _0x367572['remaining'] + _0x2c473c(0x1c3)); _0x57fad8 += _0x2c473c(0x15d) + _0x481936['description'] + _0x2c473c(0x1a7); _0x481936['image_url'] && (_0x57fad8 += '<img\x20src=\x22' + _0x481936[_0x2c473c(0x1c2)] + _0x2c473c(0x1e5)); if (_0x4eaae4 && _0x4eaae4[_0x2c473c(0x183)]) _0x57fad8 += '<div\x20class=\x22alert\x20alert-success\x22>‚úÖ\x20√ânigme\x20r√©solue\x20!</div>', _0x481936[_0x2c473c(0x182)] && (_0x57fad8 += '<div\x20class=\x22alert\x20alert-info\x22>üìç\x20<strong>Emplacement\x20du\x20QR\x20Code\x20:</strong>\x20' + _0x481936['location'] + _0x2c473c(0x1a9), _0x4eaae4[_0x2c473c(0xe7)] ? _0x57fad8 += '<div\x20class=\x22alert\x20alert-success\x22>‚úÖ\x20QR\x20Code\x20scann√©\x20!\x20+' + (_0x4eaae4['points_earned'] || 0x0) + '\x20points</div>' : (_0x57fad8 += _0x2c473c(0x1de), _0x57fad8 += _0x2c473c(0x1fb) + _0x481936['id'] + ')\x22>üì±\x20Scanner\x20le\x20QR\x20Code</button>')); else { if (!_0x367572[_0x2c473c(0x125)]) { if (_0x481936['hint1'] || _0x481936['hint2'] || _0x481936['hint3']) { _0x57fad8 += _0x2c473c(0xc8); if (_0x481936['hint1']) { const _0xf5827 = _0x4eaae4?.[_0x2c473c(0x1e0)]?.[_0x2c473c(0x10e)](0x1); _0x57fad8 += _0x2c473c(0x1ae), _0x57fad8 += _0xf5827 ? '<p><strong>Indice\x201\x20:</strong>\x20' + _0x481936[_0x2c473c(0xba)] + '</p>' : '<button\x20class=\x22btn\x20btn-warning\x22\x20onclick=\x22hdnApp.requestHint(' + _0x481936['id'] + _0x2c473c(0x1b8), _0x57fad8 += _0x2c473c(0x1a9); } if (_0x481936[_0x2c473c(0x196)]) { const _0x26b341 = _0x4eaae4?.['hints_used']?.['includes'](0x1), _0xd38870 = _0x4eaae4?.[_0x2c473c(0x1e0)]?.['includes'](0x2); _0x57fad8 += _0x2c473c(0x10c) + (!_0x26b341 ? _0x2c473c(0x125) : '') + '\x22>', _0x57fad8 += _0xd38870 ? _0x2c473c(0x179) + _0x481936['hint2'] + _0x2c473c(0x1a7) : _0x2c473c(0x1f8) + _0x481936['id'] + _0x2c473c(0x192) + (!_0x26b341 ? 'disabled' : '') + _0x2c473c(0x1ea), _0x57fad8 += _0x2c473c(0x1a9); } if (_0x481936['hint3']) { const _0x2fb561 = _0x4eaae4?.[_0x2c473c(0x1e0)]?.['includes'](0x2), _0x69791c = _0x4eaae4?.['hints_used']?.['includes'](0x3); _0x57fad8 += _0x2c473c(0x10c) + (!_0x2fb561 ? _0x2c473c(0x125) : '') + '\x22>', _0x57fad8 += _0x69791c ? '<p><strong>Indice\x203\x20:</strong>\x20' + _0x481936['hint3'] + '</p>' : _0x2c473c(0x1f8) + _0x481936['id'] + _0x2c473c(0x1bc) + (!_0x2fb561 ? 'disabled' : '') + _0x2c473c(0x102), _0x57fad8 += _0x2c473c(0x1a9); } _0x57fad8 += '</div>'; } let _0x407ea4 = supabase['from'](_0x2c473c(0x112))['select']('*')['eq'](_0x2c473c(0x1c8), _0x481936['id'])['eq'](_0x2c473c(0xf1), _0x2c473c(0x17f)); this['currentUser']['team_id'] ? _0x407ea4 = _0x407ea4['eq']('team_id', this['currentUser'][_0x2c473c(0x121)]) : _0x407ea4 = _0x407ea4['eq'](_0x2c473c(0x1a6), this[_0x2c473c(0x136)]['id']); const { data: _0x5eeef1 } = await _0x407ea4[_0x2c473c(0x14d)](); _0x5eeef1 ? _0x57fad8 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22alert\x20alert-info\x22\x20style=\x22background:\x20#fff3cd;\x20border-left:\x204px\x20solid\x20#ffaa00;\x20padding:\x2015px;\x20margin-top:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20#856404;\x20margin:\x200\x200\x2010px\x200;\x22>‚è≥\x20En\x20attente\x20de\x20validation\x20par\x20HDN</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#856404;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>Ta\x20r√©ponse\x20:</strong>\x20' + _0x5eeef1[_0x2c473c(0x1eb)] + _0x2c473c(0x13c) : _0x57fad8 += '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-top:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Ta\x20r√©ponse\x20:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22answer-' + _0x481936['id'] + '\x22\x20placeholder=\x22Ta\x20r√©ponse...\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20style=\x22width:\x20100%;\x20margin-top:\x2010px;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onclick=\x22hdnApp.submitAnswer(' + _0x481936['id'] + _0x2c473c(0x10f) + (0x3 - (_0x4eaae4?.['wrong_attempts'] || 0x0)) + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } } _0x3dae92[_0x2c473c(0x1ca)] = _0x57fad8, _0x11c852['appendChild'](_0x3dae92); } } catch (_0x327631) { console['error']('Error\x20loading\x20enigmas:', _0x327631), _0x11c852[_0x2c473c(0x1ca)] = _0x2c473c(0x180); } }, async 'getProgress'(_0x200422) { const _0x149d17 = a0_0xf1eaef; try { let _0x1b030a = supabase['from'](_0x149d17(0xcc))['select']('*')['eq'](_0x149d17(0x1c8), _0x200422); this[_0x149d17(0x136)][_0x149d17(0x121)] ? _0x1b030a = _0x1b030a['eq']('team_id', this[_0x149d17(0x136)]['team_id']) : _0x1b030a = _0x1b030a['eq'](_0x149d17(0x1a6), this['currentUser']['id']); const { data: _0x25a8e0 } = await _0x1b030a[_0x149d17(0x14d)](); if (_0x25a8e0) return _0x25a8e0; const { data: _0x2e0ba0 } = await supabase['from']('enigma_progress')[_0x149d17(0xcf)]([{ 'player_id': this[_0x149d17(0x136)][_0x149d17(0x121)] ? null : this['currentUser']['id'], 'team_id': this['currentUser']['team_id'] || null, 'enigma_id': _0x200422, 'wrong_attempts': 0x0, 'hints_used': [], 'lockout_count': 0x0, 'qr_scanned': ![], 'solved': ![], 'points_earned': 0x0 }])[_0x149d17(0x18a)]()['single'](); return _0x2e0ba0; } catch (_0x2a1696) { return console[_0x149d17(0x17d)]('Error\x20getting\x20progress:', _0x2a1696), null; } }, 'isLocked'(_0x2d8dbf) { if (!_0x2d8dbf || !_0x2d8dbf['locked_until']) return { 'locked': ![] }; const _0x2cd3ad = new Date(), _0x2863f4 = new Date(_0x2d8dbf['locked_until']); if (_0x2cd3ad < _0x2863f4) { const _0x4c90a4 = Math['ceil']((_0x2863f4 - _0x2cd3ad) / 0x3e8 / 0x3c); return { 'locked': !![], 'remaining': _0x4c90a4 }; } return { 'locked': ![] }; }, async 'updateProgress'(_0x2da73a, _0x359b01) { const _0x19506c = a0_0xf1eaef, { error: _0x2d27b0 } = await supabase[_0x19506c(0x19e)](_0x19506c(0xcc))['update']({ ..._0x359b01, 'updated_at': new Date()[_0x19506c(0xf7)]() })['eq']('id', _0x2da73a); if (_0x2d27b0) throw _0x2d27b0; }, async 'requestHint'(_0x5616a9, _0x177ee6) { const _0x57476a = a0_0xf1eaef; try { const _0x4b44a7 = await this['getProgress'](_0x5616a9); if (_0x4b44a7[_0x57476a(0x1e0)]?.[_0x57476a(0x10e)](_0x177ee6)) { showToast(_0x57476a(0x152), _0x57476a(0x17e)); return; } if (_0x177ee6 > 0x1 && !_0x4b44a7['hints_used']?.['includes'](_0x177ee6 - 0x1)) { showToast(_0x57476a(0x191), _0x57476a(0x17e)); return; } let _0x3c5e41 = 0x5; if (_0x177ee6 === 0x2) _0x3c5e41 = 0xf; if (_0x177ee6 === 0x3) _0x3c5e41 = 0x1e; const _0x382c8c = _0x4b44a7['hints_used'] ? [..._0x4b44a7[_0x57476a(0x1e0)], _0x177ee6] : [_0x177ee6]; await this[_0x57476a(0x1f5)](_0x4b44a7['id'], { 'hints_used': _0x382c8c }); const _0x314357 = this['currentUser']['points'] - _0x3c5e41; await supabase[_0x57476a(0x19e)](_0x57476a(0x167))[_0x57476a(0xf8)]({ 'points': _0x314357 })['eq']('id', this['currentUser']['id']); if (this[_0x57476a(0x136)]['team_id']) { const { data: _0x519f9f } = await supabase[_0x57476a(0x19e)](_0x57476a(0x1f3))[_0x57476a(0x18a)]('points')['eq']('id', this['currentUser'][_0x57476a(0x121)])['maybeSingle'](); _0x519f9f && await supabase['from']('teams')['update']({ 'points': _0x519f9f[_0x57476a(0x160)] - _0x3c5e41 })['eq']('id', this['currentUser']['team_id']); } showToast('‚úÖ\x20Indice\x20d√©bloqu√©\x20!\x20(-' + _0x3c5e41 + '\x20points)', _0x57476a(0x203)), await this['loadUserData'](), await this['loadEnigmes'](); } catch (_0x5835a5) { console[_0x57476a(0x17d)]('Error:', _0x5835a5), showToast(_0x57476a(0x147), _0x57476a(0x17d)); } }, async 'submitAnswer'(_0x3eb1f8) { const _0x5e133e = a0_0xf1eaef, _0x5c7220 = document['getElementById']('answer-' + _0x3eb1f8)[_0x5e133e(0x154)]['trim'](); if (!_0x5c7220) { showToast('‚ùå\x20Entre\x20une\x20r√©ponse\x20!', _0x5e133e(0x17d)); return; } try { const _0x2d1fb9 = await this[_0x5e133e(0x139)](_0x3eb1f8), _0x12991a = this[_0x5e133e(0xb9)](_0x2d1fb9); if (_0x12991a['locked']) { showToast('üîí\x20Tu\x20es\x20bloqu√©\x20encore\x20' + _0x12991a['remaining'] + _0x5e133e(0xfc), 'error'); return; } const { data: _0x1d28bc } = await supabase[_0x5e133e(0x19e)](_0x5e133e(0x126))[_0x5e133e(0x18a)]('id,\x20number,\x20title,\x20validation_type')['eq']('id', _0x3eb1f8)['single'](), { data: _0x23ecef, error: _0x3c2f05 } = await supabase['rpc']('validate_enigma_answer', { 'p_enigma_id': _0x3eb1f8, 'p_answer': _0x5c7220[_0x5e133e(0x119)]()['trim']() }); if (_0x3c2f05) throw _0x3c2f05; const _0x51ea5f = _0x23ecef; if (_0x1d28bc[_0x5e133e(0x1e6)] === 'manual') { let _0x4b5a49 = supabase['from'](_0x5e133e(0x112))['select']('id')['eq']('enigma_id', _0x3eb1f8)['eq'](_0x5e133e(0xf1), 'pending'); this[_0x5e133e(0x136)]['team_id'] ? _0x4b5a49 = _0x4b5a49['eq'](_0x5e133e(0x121), this['currentUser'][_0x5e133e(0x121)]) : _0x4b5a49 = _0x4b5a49['eq'](_0x5e133e(0x1a6), this[_0x5e133e(0x136)]['id']); const { data: _0x5e1e03 } = await _0x4b5a49['maybeSingle'](); if (_0x5e1e03) { showToast(_0x5e133e(0x1d2), 'warning'); return; } if (!_0x2d1fb9) { showToast('‚ùå\x20Erreur\x20:\x20progression\x20non\x20trouv√©e', 'error'); return; } const { error: _0x40a223 } = await supabase[_0x5e133e(0x19e)](_0x5e133e(0x112))[_0x5e133e(0xcf)]([{ 'enigma_id': _0x3eb1f8, 'player_id': this['currentUser']['id'], 'team_id': this['currentUser'][_0x5e133e(0x121)] || null, 'answer': _0x5c7220, 'status': 'pending' }]); if (_0x40a223) throw _0x40a223; showToast('‚úÖ\x20R√©ponse\x20soumise\x20!\x20En\x20attente\x20de\x20validation\x20par\x20HDN...', 'info'), await this['loadEnigmes'](); } else { if (_0x51ea5f) await this[_0x5e133e(0x1f5)](_0x2d1fb9['id'], { 'solved': !![], 'solved_at': new Date()['toISOString'](), 'points_earned': 0x0 }), showToast(_0x5e133e(0x1b6), 'success'), await this[_0x5e133e(0xc9)](), await this['loadUserData'](); else { const _0x524929 = _0x2d1fb9[_0x5e133e(0x169)] + 0x1; if (_0x524929 >= 0x3) { const _0x4ee16b = new Date(); _0x4ee16b[_0x5e133e(0xe1)](_0x4ee16b[_0x5e133e(0x1e8)]() + 0xf), await this['updateProgress'](_0x2d1fb9['id'], { 'wrong_attempts': _0x524929, 'locked_until': _0x4ee16b['toISOString'](), 'lockout_count': _0x2d1fb9['lockout_count'] + 0x1 }), showToast(_0x5e133e(0x110), _0x5e133e(0x17d)); } else await this['updateProgress'](_0x2d1fb9['id'], { 'wrong_attempts': _0x524929 }), showToast(_0x5e133e(0x162) + (0x3 - _0x524929) + _0x5e133e(0xe4), _0x5e133e(0x17d)); await this[_0x5e133e(0xc9)](); } } } catch (_0x27de35) { console['error']('Error:', _0x27de35), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20soumission\x20:\x20' + _0x27de35[_0x5e133e(0x18e)], 'error'); } }, async 'awardPoints'(_0x343285) { const _0x2cefb5 = a0_0xf1eaef; try { const _0x30ed69 = this[_0x2cefb5(0x136)][_0x2cefb5(0x160)] + _0x343285; await supabase['from']('players')['update']({ 'points': _0x30ed69 })['eq']('id', this['currentUser']['id']); if (this['currentUser'][_0x2cefb5(0x121)]) { const { data: _0x32b1d1 } = await supabase['from'](_0x2cefb5(0x1f3))[_0x2cefb5(0x18a)]('points')['eq']('id', this[_0x2cefb5(0x136)]['team_id'])['maybeSingle'](); _0x32b1d1 && await supabase[_0x2cefb5(0x19e)]('teams')['update']({ 'points': _0x32b1d1['points'] + _0x343285 })['eq']('id', this['currentUser']['team_id']); } } catch (_0x3445fc) { console[_0x2cefb5(0x17d)]('Error\x20awarding\x20points:', _0x3445fc); } }, async 'openQRScanner'(_0xa5af7d) { const _0x274fb2 = a0_0xf1eaef; try { const { data: _0xe1d2d9 } = await supabase['from'](_0x274fb2(0x126))[_0x274fb2(0x18a)](_0x274fb2(0x1d5))['eq']('id', _0xa5af7d)[_0x274fb2(0x130)](); if (!_0xe1d2d9) { showToast('‚ùå\x20√ânigme\x20non\x20trouv√©e', 'error'); return; } const { data: _0x23971f } = await supabase[_0x274fb2(0x1b9)](_0x274fb2(0xe2), { 'p_enigma_id': _0xa5af7d }); if (!_0x23971f) { showToast('‚ùå\x20QR\x20Code\x20non\x20configur√©\x20pour\x20cette\x20√©nigme', 'error'); return; } this[_0x274fb2(0xe8)] = _0xa5af7d; const _0x1ee019 = document['createElement']('div'); _0x1ee019['id'] = 'qrScannerModal', _0x1ee019[_0x274fb2(0x1ec)][_0x274fb2(0x159)] = _0x274fb2(0x15a), _0x1ee019[_0x274fb2(0x1ca)] = _0x274fb2(0x11e) + _0xe1d2d9[_0x274fb2(0x141)] + _0x274fb2(0x17c) + _0xe1d2d9[_0x274fb2(0x1d8)] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22qrScanner\x22\x20style=\x22max-width:\x20500px;\x20width:\x20100%;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x22\x20style=\x22margin-top:\x2020px;\x22\x20onclick=\x22hdnApp.closeQRScanner()\x22>‚ùå\x20Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', document['body'][_0x274fb2(0x199)](_0x1ee019), this[_0x274fb2(0x143)] = new Html5Qrcode('qrScanner'); const _0x461e2d = this; await this['qrScanner']['start']({ 'facingMode': _0x274fb2(0x156) }, { 'fps': 0xa, 'qrbox': { 'width': 0xfa, 'height': 0xfa } }, async _0x3dd4e2 => { const _0x4c4300 = _0x274fb2; await _0x461e2d['qrScanner'][_0x4c4300(0x133)](); const { data: _0x54bb62, error: _0x139771 } = await supabase[_0x4c4300(0x1b9)]('validate_qr_code', { 'p_enigma_id': _0x461e2d['currentScanEnigmaId'], 'p_scanned_code': _0x3dd4e2 }); if (_0x139771) { console[_0x4c4300(0x17d)](_0x4c4300(0x178), _0x139771), showToast(_0x4c4300(0x1a4), 'error'); return; } if (_0x54bb62) { const _0x5b60a1 = await _0x461e2d[_0x4c4300(0x139)](_0x461e2d[_0x4c4300(0xe8)]); let _0x1369ad = supabase['from']('enigma_progress')[_0x4c4300(0x18a)]('id', { 'count': _0x4c4300(0x181) })['eq'](_0x4c4300(0x1c8), _0x461e2d['currentScanEnigmaId'])['eq']('qr_scanned', !![]); const { count: _0x2a1658 } = await _0x1369ad; let _0x4264ef = 0x32; if (_0x2a1658 === 0x0) _0x4264ef = 0xc8; else { if (_0x2a1658 === 0x1) _0x4264ef = 0x96; else { if (_0x2a1658 === 0x2) _0x4264ef = 0x64; } } await _0x461e2d['updateProgress'](_0x5b60a1['id'], { 'qr_scanned': !![], 'points_earned': _0x4264ef }), await _0x461e2d['awardPoints'](_0x4264ef), _0x461e2d[_0x4c4300(0x207)](), showToast('‚úÖ\x20QR\x20Code\x20valid√©\x20!\x0a\x0a+' + _0x4264ef + _0x4c4300(0x13a), 'success'), await _0x461e2d['loadEnigmes'](), await _0x461e2d['loadUserData'](); } else showToast(_0x4c4300(0x205) + _0xe1d2d9[_0x4c4300(0x141)] + '\x0aEmplacement\x20:\x20' + _0xe1d2d9[_0x4c4300(0x1d8)], 'error'), setTimeout(async () => { const _0x3d2d08 = _0x4c4300; try { await _0x461e2d[_0x3d2d08(0x143)]['start']({ 'facingMode': _0x3d2d08(0x156) }, { 'fps': 0xa, 'qrbox': { 'width': 0xfa, 'height': 0xfa } }, arguments['callee']); } catch (_0x40b176) { console['error'](_0x3d2d08(0xe9), _0x40b176); } }, 0x7d0); }); } catch (_0xd10976) { console['error'](_0x274fb2(0x13b), _0xd10976), showToast(_0x274fb2(0x1f2), _0x274fb2(0x17d)); } }, async 'closeQRScanner'() { const _0x204aa2 = a0_0xf1eaef; if (this['qrScanner']) { try { await this[_0x204aa2(0x143)][_0x204aa2(0x133)](); } catch (_0x1c10d8) { console['log'](_0x204aa2(0xce)); } this['qrScanner'] = null; } const _0x2253ca = document['getElementById']('qrScannerModal'); _0x2253ca && _0x2253ca['remove'](); }, async 'loadClassement'() { const _0xafc93f = a0_0xf1eaef, _0xed732b = document['getElementById'](_0xafc93f(0xda)); _0xed732b['innerHTML'] = '<div\x20class=\x22loading\x22>Chargement\x20du\x20classement...</div>'; try { const { data: _0x3cf8ed } = await supabase['from']('players')[_0xafc93f(0x18a)]('id,\x20pseudo,\x20points,\x20team_id,\x20is_test')['is'](_0xafc93f(0x121), null)['eq'](_0xafc93f(0x201), ![]), { data: _0x2c0d0c } = await supabase['from'](_0xafc93f(0x1f3))[_0xafc93f(0x18a)]('id,\x20name,\x20points'); let _0x442fa6 = []; _0x3cf8ed && _0x3cf8ed[_0xafc93f(0x14b)](_0x55aa7e => { const _0x5bd53d = _0xafc93f; _0x442fa6['push']({ 'type': 'solo', 'name': _0x55aa7e[_0x5bd53d(0x1c4)], 'points': _0x55aa7e[_0x5bd53d(0x160)] || 0x0, 'members': null }); }); if (_0x2c0d0c) for (const _0x11ecc7 of _0x2c0d0c) { const { data: _0x540534 } = await supabase[_0xafc93f(0x19e)](_0xafc93f(0x167))['select']('pseudo')['eq']('team_id', _0x11ecc7['id']); _0x442fa6['push']({ 'type': _0xafc93f(0x14a), 'name': _0x11ecc7[_0xafc93f(0x12f)], 'points': _0x11ecc7[_0xafc93f(0x160)] || 0x0, 'members': _0x540534 ? _0x540534[_0xafc93f(0x1d7)](_0x51bf4f => _0x51bf4f[_0xafc93f(0x1c4)])[_0xafc93f(0xf9)](',\x20') : '' }); } _0x442fa6[_0xafc93f(0x128)]((_0x24a500, _0x341319) => _0x341319[_0xafc93f(0x160)] - _0x24a500['points']), _0xed732b[_0xafc93f(0x1ca)] = ''; if (_0x442fa6[_0xafc93f(0x131)] === 0x0) { _0xed732b[_0xafc93f(0x1ca)] = '<p\x20style=\x22text-align:\x20center;\x20color:\x20#666;\x22>Aucun\x20joueur\x20dans\x20le\x20classement.</p>'; return; } const _0x5ae76a = document[_0xafc93f(0x1e2)]('h3'); _0x5ae76a[_0xafc93f(0x1f4)] = _0xafc93f(0x14e), _0xed732b[_0xafc93f(0x199)](_0x5ae76a), _0x442fa6[_0xafc93f(0x14b)]((_0x3d583e, _0x10d518) => { const _0x5f5967 = _0xafc93f, _0x1a64cd = document['createElement']('div'); _0x1a64cd['className'] = 'ranking-item'; let _0x3c9efd = ''; if (_0x10d518 === 0x0) _0x3c9efd = 'first'; else { if (_0x10d518 === 0x1) _0x3c9efd = 'second'; else { if (_0x10d518 === 0x2) _0x3c9efd = 'third'; } } const _0x24691a = _0x3d583e[_0x5f5967(0x171)] === _0x5f5967(0x1c5) ? 'üë§\x20Solo' : _0x5f5967(0x12c), _0x3cd960 = _0x3d583e[_0x5f5967(0x1cb)] ? _0x5f5967(0xcb) + _0x3d583e[_0x5f5967(0x1cb)] + '</p>' : ''; _0x1a64cd[_0x5f5967(0x1ca)] = _0x5f5967(0x140) + _0x3c9efd + _0x5f5967(0x127) + (_0x10d518 + 0x1) + _0x5f5967(0x11b) + _0x3d583e['name'] + _0x5f5967(0x14c) + _0x24691a + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x3cd960 + _0x5f5967(0xec) + _0x3d583e['points'] + '\x20pts</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', _0xed732b[_0x5f5967(0x199)](_0x1a64cd); }); } catch (_0x163c30) { console['error']('Error\x20loading\x20ranking:', _0x163c30), _0xed732b['innerHTML'] = '<p\x20style=\x22color:\x20#ff4444;\x22>Erreur\x20lors\x20du\x20chargement\x20du\x20classement.</p>'; } }, async 'loadAdminPanel'() { const _0x4ab82a = a0_0xf1eaef; if (!this[_0x4ab82a(0x136)]['is_admin']) { showToast(_0x4ab82a(0x123), 'error'); return; } const { data: _0x450d67 } = await supabase['from'](_0x4ab82a(0x167))[_0x4ab82a(0x18a)]('id', { 'count': 'exact' }), { data: _0x240e5a } = await supabase[_0x4ab82a(0x19e)](_0x4ab82a(0x126))['select']('id', { 'count': _0x4ab82a(0x181) }), { data: _0x487ff9 } = await supabase[_0x4ab82a(0x19e)]('submissions')[_0x4ab82a(0x18a)]('id', { 'count': _0x4ab82a(0x181) })['eq']('status', 'pending'); document[_0x4ab82a(0xdb)](_0x4ab82a(0x184))['textContent'] = _0x450d67?.[_0x4ab82a(0x131)] || 0x0, document[_0x4ab82a(0xdb)](_0x4ab82a(0x158))['textContent'] = _0x240e5a?.[_0x4ab82a(0x131)] || 0x0, document[_0x4ab82a(0xdb)](_0x4ab82a(0x135))[_0x4ab82a(0x1f4)] = _0x487ff9?.['length'] || 0x0, await this['loadAdminEnigmas'](), await this['loadPendingValidations'](); }, async 'loadAdminEnigmas'() { const _0x47daa7 = a0_0xf1eaef, _0x4167d1 = document[_0x47daa7(0xdb)](_0x47daa7(0x118)); try { const { data: _0x111d7d } = await supabase[_0x47daa7(0x19e)]('enigmas')[_0x47daa7(0x18a)]('*')[_0x47daa7(0x1cd)]('number', { 'ascending': !![] }); if (!_0x111d7d || _0x111d7d['length'] === 0x0) { _0x4167d1[_0x47daa7(0x1ca)] = _0x47daa7(0xd6); return; } _0x4167d1['innerHTML'] = '', _0x111d7d[_0x47daa7(0x14b)](_0x5786d6 => { const _0x770065 = _0x47daa7, _0xd912f8 = document[_0x770065(0x1e2)](_0x770065(0xe6)); _0xd912f8['style']['cssText'] = 'background:\x20#f9f9f9;\x20padding:\x2015px;\x20margin:\x2010px\x200;\x20border-radius:\x208px;\x20border-left:\x204px\x20solid\x20#343973;', _0xd912f8['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20#343973;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20√ânigme\x20#' + _0x5786d6['number'] + _0x770065(0x17c) + _0x5786d6[_0x770065(0x142)] + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x5786d6[_0x770065(0x1c9)] ? '<span\x20class=\x22badge\x20badge-success\x22>Publi√©e</span>' : '<span\x20class=\x22badge\x20badge-warning\x22>Brouillon</span>') + _0x770065(0x10d) + (_0x5786d6['scheduled_at'] ? '<span\x20class=\x22badge\x20badge-primary\x22>Programm√©e:\x20' + formatParisDateTime(_0x5786d6[_0x770065(0x15b)]) + '</span>' : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#666;\x20margin:\x205px\x200;\x22>R√©ponse:\x20' + _0x5786d6['answer'] + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#666;\x20margin:\x205px\x200;\x22>Lieu\x20QR:\x20' + _0x5786d6[_0x770065(0x1d8)] + _0x770065(0x173) + _0x5786d6[_0x770065(0x182)] + '</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x5786d6[_0x770065(0x1c2)] ? _0x770065(0x172) + _0x5786d6[_0x770065(0x1c2)] + '\x22\x20target=\x22_blank\x22\x20style=\x22color:\x20#343973;\x22>Voir</a></p>' : '') + _0x770065(0x1a0) + _0x5786d6['qr_secret'] + '\x27,\x20' + _0x5786d6['number'] + ')\x22>üì•\x20T√©l√©charger\x20QR</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x22\x20onclick=\x22hdnApp.editEnigma(' + _0x5786d6['id'] + _0x770065(0x1bb) + (_0x5786d6['published'] ? 'btn-warning' : 'btn-success') + '\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onclick=\x22hdnApp.togglePublish(' + _0x5786d6['id'] + ',\x20' + !_0x5786d6['published'] + ')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + (_0x5786d6[_0x770065(0x1c9)] ? 'üì•\x20D√©publier' : _0x770065(0x200)) + _0x770065(0x144) + _0x5786d6['id'] + ')\x22>üóëÔ∏è\x20Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22qr-display-' + _0x5786d6['number'] + _0x770065(0x137), _0x4167d1[_0x770065(0x199)](_0xd912f8); }); } catch (_0x3bec8e) { console[_0x47daa7(0x17d)]('Error\x20loading\x20admin\x20enigmas:', _0x3bec8e), _0x4167d1['innerHTML'] = _0x47daa7(0x1b2); } }, 'generateAndShowQR'(_0x1f0af0, _0x54e99e) { const _0x3ecdfd = a0_0xf1eaef, _0x515e18 = document['getElementById']('qr-display-' + _0x54e99e); if (!_0x515e18[_0x3ecdfd(0x145)]['contains']('hidden')) { _0x515e18[_0x3ecdfd(0x145)][_0x3ecdfd(0xef)](_0x3ecdfd(0x1d0)), _0x515e18['innerHTML'] = ''; return; } _0x515e18[_0x3ecdfd(0x145)][_0x3ecdfd(0x1c7)]('hidden'), _0x515e18[_0x3ecdfd(0x1ca)] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20#343973;\x20margin-bottom:\x2010px;\x22>QR\x20Code\x20pour\x20√ânigme\x20#' + _0x54e99e + _0x3ecdfd(0x190) + _0x1f0af0 + _0x3ecdfd(0xf5) + _0x54e99e + '\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20style=\x22margin-top:\x2010px;\x22\x20onclick=\x22hdnApp.downloadQR(' + _0x54e99e + _0x3ecdfd(0xd7), new QRCode(document[_0x3ecdfd(0xdb)]('qrcode-' + _0x54e99e), { 'text': _0x1f0af0, 'width': 0x100, 'height': 0x100, 'colorDark': '#000000', 'colorLight': '#ffffff', 'correctLevel': QRCode[_0x3ecdfd(0x204)]['H'] }); }, 'downloadQR'(_0x1f7780) { const _0x18139c = document['querySelector']('#qrcode-' + _0x1f7780 + '\x20canvas'); if (!_0x18139c) { showToast('‚ùå\x20QR\x20Code\x20non\x20trouv√©', 'error'); return; } _0x18139c['toBlob'](_0x571fc4 => { const _0x32f161 = a0_0x53f5, _0x4c0200 = URL['createObjectURL'](_0x571fc4), _0x2750eb = document[_0x32f161(0x1e2)]('a'); _0x2750eb['href'] = _0x4c0200, _0x2750eb['download'] = _0x32f161(0xdf) + _0x1f7780 + '.png', _0x2750eb['click'](), URL['revokeObjectURL'](_0x4c0200), showToast(_0x32f161(0xca), _0x32f161(0x203)); }); }, async 'togglePublish'(_0x2b8c68, _0x1e454c) { const _0x2b2e3d = a0_0xf1eaef; try { const { error: _0x537db2 } = await supabase[_0x2b2e3d(0x19e)]('enigmas')[_0x2b2e3d(0xf8)]({ 'published': _0x1e454c })['eq']('id', _0x2b8c68); if (_0x537db2) throw _0x537db2; showToast(_0x1e454c ? _0x2b2e3d(0x100) : '‚úÖ\x20√ânigme\x20d√©publi√©e\x20!', _0x2b2e3d(0x203)), await this[_0x2b2e3d(0x198)](); } catch (_0x190c4b) { console['error']('Error:', _0x190c4b), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20modification', _0x2b2e3d(0x17d)); } }, async 'deleteEnigma'(_0x416ead) { const _0x189b94 = a0_0xf1eaef; if (!confirm(_0x189b94(0x1df))) return; try { const { error: _0x174ded } = await supabase['from']('enigmas')[_0x189b94(0x1fe)]()['eq']('id', _0x416ead); if (_0x174ded) throw _0x174ded; showToast(_0x189b94(0x16e), _0x189b94(0x203)); const { data: _0x120d13 } = await supabase[_0x189b94(0x19e)]('enigmas')['select']('*')[_0x189b94(0x1cd)]('number', { 'ascending': !![] }); for (let _0x550b84 = 0x0; _0x550b84 < _0x120d13['length']; _0x550b84++) { await supabase[_0x189b94(0x19e)]('enigmas')[_0x189b94(0xf8)]({ 'number': _0x550b84 + 0x1 })['eq']('id', _0x120d13[_0x550b84]['id']); } await this['loadAdminEnigmas'](); } catch (_0xbc2139) { console[_0x189b94(0x17d)](_0x189b94(0x146), _0xbc2139), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20suppression', _0x189b94(0x17d)); } }, async 'editEnigma'(_0x3f37f5) { const _0x52f0f9 = a0_0xf1eaef; try { const { data: _0xdb9f00 } = await supabase['from'](_0x52f0f9(0x126))[_0x52f0f9(0x18a)]('*')['eq']('id', _0x3f37f5)[_0x52f0f9(0x130)](); if (!_0xdb9f00) return; document[_0x52f0f9(0xdb)]('enigmaTitle')[_0x52f0f9(0x154)] = _0xdb9f00['title'], document[_0x52f0f9(0xdb)]('enigmaDescription')[_0x52f0f9(0x154)] = _0xdb9f00[_0x52f0f9(0x10b)], document['getElementById'](_0x52f0f9(0xd3))[_0x52f0f9(0x154)] = _0xdb9f00[_0x52f0f9(0x1c2)] || '', document['getElementById']('enigmaAnswer')['value'] = _0xdb9f00[_0x52f0f9(0x1eb)], document['getElementById']('enigmaLocation')[_0x52f0f9(0x154)] = _0xdb9f00['location'], document['getElementById']('enigmaValidation')[_0x52f0f9(0x154)] = _0xdb9f00[_0x52f0f9(0x1e6)], document['getElementById']('enigmaHint1')[_0x52f0f9(0x154)] = _0xdb9f00[_0x52f0f9(0xba)] || '', document['getElementById'](_0x52f0f9(0x164))['value'] = _0xdb9f00[_0x52f0f9(0x196)] || '', document['getElementById'](_0x52f0f9(0x13f))[_0x52f0f9(0x154)] = _0xdb9f00['hint3'] || '', document['getElementById'](_0x52f0f9(0x122))['checked'] = _0xdb9f00[_0x52f0f9(0x1c9)]; if (_0xdb9f00['scheduled_at']) { const _0x416293 = toParisTime(_0xdb9f00[_0x52f0f9(0x15b)]), _0x12828c = _0x416293['getFullYear'](), _0x32f8de = String(_0x416293[_0x52f0f9(0x10a)]() + 0x1)[_0x52f0f9(0x16d)](0x2, '0'), _0x24e59d = String(_0x416293['getDate']())[_0x52f0f9(0x16d)](0x2, '0'), _0x2738fd = String(_0x416293[_0x52f0f9(0x1dc)]())[_0x52f0f9(0x16d)](0x2, '0'), _0x40c94a = String(_0x416293[_0x52f0f9(0x1e8)]())[_0x52f0f9(0x16d)](0x2, '0'); document[_0x52f0f9(0xdb)]('enigmaSchedule')['value'] = _0x12828c + '-' + _0x32f8de + '-' + _0x24e59d + 'T' + _0x2738fd + ':' + _0x40c94a; } const _0x66fe81 = document[_0x52f0f9(0x176)](_0x52f0f9(0xbf)); _0x66fe81['textContent'] = 'üíæ\x20Mettre\x20√†\x20jour', _0x66fe81[_0x52f0f9(0x1e1)] = () => this[_0x52f0f9(0x1ab)](_0x3f37f5), document['getElementById']('enigmaTitle')[_0x52f0f9(0x1f0)]({ 'behavior': _0x52f0f9(0x1cc), 'block': 'center' }); } catch (_0x385e92) { console[_0x52f0f9(0x17d)](_0x52f0f9(0x146), _0x385e92), showToast(_0x52f0f9(0x117), 'error'); } }, async 'updateEnigma'(_0xcd99c7) { const _0x289eb5 = a0_0xf1eaef, _0x511b42 = document[_0x289eb5(0xdb)](_0x289eb5(0x1fa))[_0x289eb5(0x154)][_0x289eb5(0x138)](), _0x1f5dff = document['getElementById'](_0x289eb5(0x1d4))['value'][_0x289eb5(0x138)](), _0x4250c8 = document['getElementById']('enigmaImageUrl')[_0x289eb5(0x154)]['trim'](), _0xea79cd = document['getElementById']('enigmaAnswer')['value']['trim'](), _0x5a4312 = document[_0x289eb5(0xdb)](_0x289eb5(0x1b1))[_0x289eb5(0x154)]['trim'](), _0x357cb9 = document['getElementById'](_0x289eb5(0x1bf))['value'], _0x4d32fd = document[_0x289eb5(0xdb)]('enigmaHint1')['value']['trim'](), _0x39460b = document[_0x289eb5(0xdb)](_0x289eb5(0x164))[_0x289eb5(0x154)]['trim'](), _0x492b5c = document['getElementById']('enigmaHint3')[_0x289eb5(0x154)]['trim'](), _0x5a39ce = document['getElementById']('enigmaPublished')[_0x289eb5(0x134)], _0x349282 = document['getElementById'](_0x289eb5(0x18b))[_0x289eb5(0x154)]; if (!_0x511b42 || !_0x1f5dff || !_0xea79cd || !_0x5a4312) { showToast('‚ùå\x20Remplis\x20tous\x20les\x20champs\x20obligatoires\x20!', _0x289eb5(0x17d)); return; } try { const { data: _0x2cd2c2 } = await supabase[_0x289eb5(0x19e)]('enigmas')[_0x289eb5(0x18a)](_0x289eb5(0x182))['eq']('id', _0xcd99c7)['single'](); let _0x18ef82 = _0x2cd2c2?.['qr_secret']; !_0x18ef82 && (_0x18ef82 = 'HDN-E' + _0xcd99c7 + '-' + Math['random']()[_0x289eb5(0xff)](0x24)['substr'](0x2, 0x6)[_0x289eb5(0x1a3)]()); const { error: _0x4f9bc5 } = await supabase['from']('enigmas')[_0x289eb5(0xf8)]({ 'title': _0x511b42, 'description': _0x1f5dff, 'image_url': _0x4250c8 || null, 'answer': _0xea79cd, 'location': _0x5a4312, 'qr_secret': _0x18ef82, 'validation_type': _0x357cb9, 'hint1': _0x4d32fd || null, 'hint2': _0x39460b || null, 'hint3': _0x492b5c || null, 'published': _0x5a39ce, 'scheduled_at': this[_0x289eb5(0x1f6)](_0x349282) })['eq']('id', _0xcd99c7); if (_0x4f9bc5) throw _0x4f9bc5; showToast(_0x289eb5(0x101), _0x289eb5(0x203)), this[_0x289eb5(0x12e)](), document['getElementById']('enigmaSchedule')[_0x289eb5(0x154)] = ''; const _0x5cc0c9 = document['querySelector']('#admin-section\x20.btn-success'); _0x5cc0c9[_0x289eb5(0x1f4)] = '‚úÖ\x20Cr√©er\x20l\x27√©nigme', _0x5cc0c9['onclick'] = () => this[_0x289eb5(0x1f7)](), await this[_0x289eb5(0x198)](); } catch (_0xf82c47) { console['error'](_0x289eb5(0x146), _0xf82c47), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20:\x20' + _0xf82c47[_0x289eb5(0x18e)], _0x289eb5(0x17d)); } }, async 'createEnigma'() { const _0xa3a2f0 = a0_0xf1eaef, _0xe50003 = document['getElementById']('enigmaTitle')['value'][_0xa3a2f0(0x138)](), _0x22515a = document['getElementById']('enigmaDescription')[_0xa3a2f0(0x154)]['trim'](), _0x533fcb = document[_0xa3a2f0(0xdb)]('enigmaImageUrl')['value'][_0xa3a2f0(0x138)](), _0x4463b3 = document['getElementById']('enigmaAnswer')[_0xa3a2f0(0x154)][_0xa3a2f0(0x138)](), _0xe2401c = document['getElementById'](_0xa3a2f0(0x1b1))['value'][_0xa3a2f0(0x138)](), _0x53f4f2 = document[_0xa3a2f0(0xdb)](_0xa3a2f0(0x1bf))[_0xa3a2f0(0x154)], _0x20dd34 = document[_0xa3a2f0(0xdb)](_0xa3a2f0(0xc4))[_0xa3a2f0(0x154)]['trim'](), _0x14e2b3 = document[_0xa3a2f0(0xdb)]('enigmaHint2')['value'][_0xa3a2f0(0x138)](), _0x2fe02f = document['getElementById']('enigmaHint3')[_0xa3a2f0(0x154)]['trim'](), _0x30db53 = document['getElementById']('enigmaPublished')[_0xa3a2f0(0x134)], _0x45ab27 = document['getElementById'](_0xa3a2f0(0x18b))[_0xa3a2f0(0x154)]; if (!_0xe50003 || !_0x22515a || !_0x4463b3 || !_0xe2401c) { showToast('‚ùå\x20Remplis\x20tous\x20les\x20champs\x20obligatoires\x20!', _0xa3a2f0(0x17d)); return; } try { const { data: _0x3f3014 } = await supabase[_0xa3a2f0(0x19e)]('enigmas')['select']('number')[_0xa3a2f0(0x1cd)]('number', { 'ascending': ![] })['limit'](0x1), _0xa7c6c3 = _0x3f3014 && _0x3f3014[_0xa3a2f0(0x131)] > 0x0 ? _0x3f3014[0x0]['number'] + 0x1 : 0x1, _0x5157ab = _0xa3a2f0(0x150) + _0xa7c6c3 + '-' + Math['random']()['toString'](0x24)['substr'](0x2, 0x6)[_0xa3a2f0(0x1a3)](), { error: _0x5e560e } = await supabase[_0xa3a2f0(0x19e)](_0xa3a2f0(0x126))['insert']([{ 'number': _0xa7c6c3, 'title': _0xe50003, 'description': _0x22515a, 'image_url': _0x533fcb || null, 'answer': _0x4463b3, 'location': _0xe2401c, 'validation_type': _0x53f4f2, 'hint1': _0x20dd34 || null, 'hint2': _0x14e2b3 || null, 'hint3': _0x2fe02f || null, 'qr_secret': _0x5157ab, 'published': _0x30db53, 'scheduled_at': this[_0xa3a2f0(0x1f6)](_0x45ab27) }]); if (_0x5e560e) throw _0x5e560e; showToast('‚úÖ\x20√ânigme\x20#' + _0xa7c6c3 + '\x20cr√©√©e\x20!\x0a\x0aCode\x20QR:\x20' + _0x5157ab, _0xa3a2f0(0x203)), this['resetEnigmaForm'](), document['getElementById']('enigmaSchedule')['value'] = '', await this[_0xa3a2f0(0x198)](); } catch (_0x3c5a6b) { console['error'](_0xa3a2f0(0x146), _0x3c5a6b), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20cr√©ation\x20:\x20' + _0x3c5a6b[_0xa3a2f0(0x18e)], 'error'); } }, 'resetEnigmaForm'() { const _0x2b6c3 = a0_0xf1eaef; document[_0x2b6c3(0xdb)](_0x2b6c3(0x1fa))['value'] = '', document['getElementById'](_0x2b6c3(0x1d4))[_0x2b6c3(0x154)] = '', document['getElementById'](_0x2b6c3(0xd3))[_0x2b6c3(0x154)] = '', document['getElementById']('enigmaAnswer')[_0x2b6c3(0x154)] = '', document['getElementById']('enigmaLocation')['value'] = '', document[_0x2b6c3(0xdb)](_0x2b6c3(0x1bf))[_0x2b6c3(0x154)] = _0x2b6c3(0xd2), document[_0x2b6c3(0xdb)]('enigmaHint1')['value'] = '', document['getElementById']('enigmaHint2')['value'] = '', document[_0x2b6c3(0xdb)](_0x2b6c3(0x13f))['value'] = '', document['getElementById']('enigmaPublished')[_0x2b6c3(0x134)] = ![]; }, async 'loadPendingValidations'() { const _0x350935 = a0_0xf1eaef, _0x37e12a = document[_0x350935(0xdb)](_0x350935(0x1fc)); try { const { data: _0x22cec0 } = await supabase['from'](_0x350935(0x112))[_0x350935(0x18a)](_0x350935(0x1be))['eq']('status', 'pending')[_0x350935(0x1cd)]('created_at', { 'ascending': !![] }); if (!_0x22cec0 || _0x22cec0[_0x350935(0x131)] === 0x0) { _0x37e12a['innerHTML'] = _0x350935(0x16a); return; } _0x37e12a[_0x350935(0x1ca)] = '', _0x22cec0[_0x350935(0x14b)](_0x14bd2c => { const _0x54ad6b = _0x350935, _0x3a7cdb = document[_0x54ad6b(0x1e2)]('div'); _0x3a7cdb[_0x54ad6b(0x1ec)][_0x54ad6b(0x159)] = _0x54ad6b(0x18c); const _0x4d5b98 = _0x14bd2c['players']?.[_0x54ad6b(0x1c4)] || _0x54ad6b(0x175), _0x86bdea = _0x14bd2c[_0x54ad6b(0x126)]?.[_0x54ad6b(0x142)] || '√ânigme\x20inconnue', _0x41f51d = _0x14bd2c['enigmas']?.['answer'] || ''; _0x3a7cdb['innerHTML'] = _0x54ad6b(0xf3) + _0x4d5b98 + _0x54ad6b(0x197) + _0x14bd2c['enigmas']?.[_0x54ad6b(0x141)] + '\x20:\x20' + _0x86bdea + _0x54ad6b(0x132) + _0x14bd2c['answer'] + _0x54ad6b(0x151) + _0x41f51d + '</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22hdnApp.validateSubmission(' + _0x14bd2c['id'] + ',\x20true)\x22>‚úÖ\x20Accepter</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x22\x20onclick=\x22hdnApp.validateSubmission(' + _0x14bd2c['id'] + _0x54ad6b(0x111), _0x37e12a[_0x54ad6b(0x199)](_0x3a7cdb); }); } catch (_0x2d0537) { console['error']('Error\x20loading\x20pending\x20validations:', _0x2d0537), _0x37e12a[_0x350935(0x1ca)] = _0x350935(0x1b2); } }, async 'validateSubmission'(_0x34ff3c, _0x4b1ee9) { const _0x5e30e8 = a0_0xf1eaef; try { const { data: _0x3ea859 } = await supabase['from']('submissions')[_0x5e30e8(0x18a)]('*')['eq']('id', _0x34ff3c)[_0x5e30e8(0x130)](); if (!_0x3ea859) return; await supabase[_0x5e30e8(0x19e)]('submissions')['update']({ 'status': _0x4b1ee9 ? _0x5e30e8(0x104) : _0x5e30e8(0x19d) })['eq']('id', _0x34ff3c); if (_0x4b1ee9) { let _0x228118 = supabase['from'](_0x5e30e8(0xcc))['select']('*')['eq'](_0x5e30e8(0x1c8), _0x3ea859[_0x5e30e8(0x1c8)]); _0x3ea859[_0x5e30e8(0x121)] ? _0x228118 = _0x228118['eq'](_0x5e30e8(0x121), _0x3ea859['team_id']) : _0x228118 = _0x228118['eq'](_0x5e30e8(0x1a6), _0x3ea859['player_id']); const { data: _0x292068 } = await _0x228118[_0x5e30e8(0x14d)](); _0x292068 && await supabase[_0x5e30e8(0x19e)]('enigma_progress')[_0x5e30e8(0xf8)]({ 'solved': !![], 'solved_at': new Date()[_0x5e30e8(0xf7)](), 'points_earned': 0x0 })['eq']('id', _0x292068['id']); } showToast(_0x4b1ee9 ? _0x5e30e8(0x105) : _0x5e30e8(0x202), _0x4b1ee9 ? _0x5e30e8(0x203) : 'error'), await this[_0x5e30e8(0x17b)](), await this['loadAdminPanel'](); } catch (_0x4ce133) { console['error']('Error:', _0x4ce133), showToast('‚ùå\x20Erreur\x20lors\x20de\x20la\x20validation', 'error'); } }, async 'exportData'() { const _0x2ba686 = a0_0xf1eaef; if (!this['currentUser']?.[_0x2ba686(0x189)]) { showToast('‚ùå\x20Acc√®s\x20refus√©\x20-\x20Admin\x20uniquement', 'error'); return; } try { const { data: _0x34edbf } = await supabase[_0x2ba686(0x19e)](_0x2ba686(0x167))['select'](_0x2ba686(0xeb)), { data: _0x265e3a } = await supabase['from']('teams')[_0x2ba686(0x18a)]('id,\x20name,\x20code,\x20points,\x20leader,\x20created_at'), { data: _0x4289b6 } = await supabase[_0x2ba686(0x19e)](_0x2ba686(0x126))[_0x2ba686(0x18a)]('id,\x20number,\x20title,\x20description,\x20answer,\x20location,\x20qr_secret,\x20validation_type,\x20hint1,\x20hint2,\x20hint3,\x20published,\x20scheduled_at'), { data: _0x220301 } = await supabase[_0x2ba686(0x19e)](_0x2ba686(0xcc))['select']('*'), { data: _0x4c0509 } = await supabase[_0x2ba686(0x19e)]('submissions')[_0x2ba686(0x18a)]('*'), _0x46fb87 = { 'exported_at': new Date()['toISOString'](), 'players': _0x34edbf, 'teams': _0x265e3a, 'enigmas': _0x4289b6, 'progress': _0x220301, 'submissions': _0x4c0509 }, _0x38bac4 = new Blob([JSON['stringify'](_0x46fb87, null, 0x2)], { 'type': _0x2ba686(0xf4) }), _0x11285d = URL['createObjectURL'](_0x38bac4), _0xf67b61 = document['createElement']('a'); _0xf67b61[_0x2ba686(0x1d1)] = _0x11285d, _0xf67b61['download'] = 'hdn-export-' + new Date()[_0x2ba686(0xf7)]()['split']('T')[0x0] + _0x2ba686(0x16f), _0xf67b61['click'](), showToast('‚úÖ\x20Donn√©es\x20export√©es\x20!', _0x2ba686(0x203)); } catch (_0x32c308) { console['error'](_0x2ba686(0x146), _0x32c308), showToast('‚ùå\x20Erreur\x20lors\x20de\x20l\x27export', 'error'); } } }; document[a0_0xf1eaef(0xf6)](a0_0xf1eaef(0x1d9), () => { hdnApp['init'](); }); function a0_0x211b() { const _0x2c5feb = ['lNjHzgLVlw9WDgLVBG', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaQlaOGicaGicaGicaGicaGicaGicaGicaGicaGicaGzw5Pz21HCYaODgL0BguSig51BwjLCIWGyw5ZD2vYksWkicaGicaGicaGicaGicaGicaGicaGicaGicaGihbSyxLLCNmGkhbZzxvKBYKkicaGicaGicaGicaGicaGicaGicaGicaG', 'zw5Pz21HvMfSAwrHDgLVBG', 'C29SB0zVCM0', 'cIaGicaGicaGicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBg9JA291Dc10Aw1LCIi+cIaGicaGicaGicaGicaGicaGicaGicaGidXOmZ7WN5ssiejSB3f1W6K8l2GZpGOGicaGicaGicaGicaGicaGicaGicaGica8Cd5uzw1WCYbYzxn0yw50idOG', 'Aw1Hz2vFDxjS', 'ig1PBNv0zxm8l3a+cIaGicaGicaGicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGicaGica', 'ChnLDwrV', 'C29SBW', 'ywrTAw5oyxzcDg4', 'CMvTB3zL', 'zw5Pz21Hx2LK', 'ChvIBgLZAgvK', 'Aw5Uzxjive1m', 'BwvTyMvYCW', 'C21VB3rO', 'B3jKzxi', 'AwqSig51BwjLCIWGDgL0BguSigrLC2nYAxb0Aw9UlcbPBwfNzv91CMWSigXVy2f0Aw9Ulcb2ywXPzgf0Aw9Ux3r5CguSigHPBNqXlcbOAw50mIWGAgLUDdmSihb1yMXPC2HLzcWGC2nOzwr1BgvKx2f0', 'nfj2AxrYAq', 'AgLKzgvU', 'AhjLzG', '4O+Zifr1igfZigtdQwRdOcb1BMuGCSoPCg9UC2uGzw4Gyxr0zw50zsbKzsb2ywXPzgf0Aw9Uice', 'C3rHCNrdB3vUDgrVD24', 'zw5Pz21HrgvZy3jPChrPB24', 'AwqSig51BwjLCIWGDgL0BguSigXVy2f0Aw9U', 'CgXHEwvYswq', 'BwfW', 'Bg9JyxrPB24', 're9nq29UDgvUDeXVywrLza', 'CMfUzg9T', 'mJrWrg1zuw8', 'z2v0sg91CNm', 'cIaGicaGicaGpgrPDIbJBgfZCZ0ICNvSzxmTBw9KywWTy29UDgvUDci+cIaGicaGicaGicaGidXIDxr0B24Gy2XHC3m9iNj1BgvZlw1VzgfSlwnSB3nLiIbVBMnSAwnRpsjOzg5bChaUy2XVC2vsDwXLC01VzgfSkcKIpSoxpc9IDxr0B24+cIaGicaGicaGicaGidXKAxyGAwq9iM1VzgfSuNvSzxndB250zw50iJ48l2rPDJ4kicaGicaGica8l2rPDJ4kicaGia', 'pgrPDIbJBgfZCZ0IywXLCNqGywXLCNqTD2fYBMLUzYi+4PQG77IpifnJyw5UzsbSzsbruIbJB2rLihbVDxiGz2fNBMvYihrLCYbWB2LUDhmGitWVzgL2pG', 'rxmTDhuGC8o7CIbKzsb2B3vSB2LYihn1ChbYAw1LCIbJzxr0zsddQw5Pz21Lid8', 'AgLUDhnFDxnLza', 'B25JBgLJAW', 'y3jLyxrLrwXLBwvUDa', 'z2v0sxrLBq', 'Bg9NAw5qyxnZD29Yza', 'iIbJBgfZCZ0Izw5Pz21LlwLTywDLiIbHBhq9iKLTywDLigrLigWNW6LUAwDTzsiGB25LCNjVCJ0IDgHPCY5ZDhLSzs5KAxnWBgf5psDUB25LjYiGlZ4', 'DMfSAwrHDgLVBL90ExbL', 'AM9PBMnYzwf0zvrLyw1qyxnZD29Yza', 'z2v0twLUDxrLCW', 'pgrPDIbJBgfZCZ0IBg9HzgLUzYi+q2HHCMDLBwvUDcbKzxmGW6LUAwDTzxmUlI48l2rPDJ4', 'pVcFLjmGsw5KAwnLidiGkc0XnsbWB2LUDhmPpc9IDxr0B24+', 'yw5ZD2vY', 'C3r5Bgu', 'qM91Dg9UihrYB3v2W6K6', 'rxjYB3iGy2fSy3vSyxrPBMCGCMfUAZO', 'C3rYAw5NAwz5', 'C2nYB2XSsw50B1zPzxC', 'C2XPzgvvCcaWlJnZigvHC2uTB3v0ihjLDMvYC2u', '4P2mievYCMv1CIbSB3jZigrLigWNB3v2zxj0DxjLigr1ihnJyw5Uzxi', 'DgvHBxm', 'Dgv4DenVBNrLBNq', 'DxbKyxrLuhjVz3jLC3m', 'y29UDMvYDeXVy2fSvg9vvem', 'y3jLyxrLrw5Pz21H', 'pgj1DhrVBIbJBgfZCZ0IyNrUigj0BI13yxjUAw5NiIbVBMnSAwnRpsjOzg5bChaUCMvXDwvZDeHPBNqO', 'y3jLyxrLvgvHBuzVCM0', 'zw5Pz21HvgL0Bgu', 'pgj1DhrVBIbJBgfZCZ0IyNrUigj0BI1WCMLTyxj5iIbVBMnSAwnRpsjOzg5bChaUB3bLBLfsu2nHBM5LCIG', 'CgvUzgLUz1zHBgLKyxrPB25ZtgLZDa', 'vMv1AwXSzxOGCMvTCgXPCIb0B3vZigXLCYbJAgfTChm', 'zgvSzxrL', 'mc41', '8j+tPcbqDwjSAwvY', 'AxnFDgvZDa', '4P2mifldQxbVBNnLihjLzNvZW6LLice', 'C3vJy2vZCW', 'q29YCMvJDeXLDMvS', '4P2mie1HDxzHAxmGuviGy29KzsaHcGPuDsbKB2LZihnJyw5UzxiGBguGuviGzguGBcFdQw5Pz21Licm', 'DgvHBufJDgLVBLnLBgvJDgLVBG', 'y2XVC2vruLnJyw5Uzxi', 'AxnfBMLNBwfby2nLC3nbBgXVD2vK', 'AxnmB2nRzwq', 'AgLUDde', '4P2mienLihbZzxvKBYbLEgLZDguGzmoPASoGice', 'Dgv4Da', '4P2mienVzguGzcFdQxf1AxbLigLUDMfSAwrLice', 'z2v0vgLTzq', 'i2fKBwLUlxnLy3rPB24GlMj0BI1ZDwnJzxnZ', 'zgLZywjSzwq', 'zw5Pz21LCW', 'Dg9HC3qG', 'zNiTrLi', 'zw5Pz21HsgLUDde', 'lNrVyxn0', 'mteZmte0zgTAyw9M', 'mtG5otuYrwj3vwHL', 'pgrPDIbJBgfZCZ0IAgLUDhmTC2vJDgLVBIi+pgG0pVcFKQeGsw5KAwnLCZWVAdq+', 'Bg9HzevUAwDTzxm', '4PYfiffsienVzguGDmoPBmoPy2HHCMFdQsaH', 'phaGC3r5Bgu9iMzVBNqTC2L6ztOGmc44nwvToYbJB2XVCJOGiZy2nJSGBwfYz2LUlxrVCdOGnxb4oYi+', 'zw5Pz21Hx3bYB2DYzxnZ', 'y2XHC3noyw1L', 'u2nHBM5LCIbHBhjLywr5ihn0B3bWzwq', 'Aw5Zzxj0', 'y3jLyxrL', 'AM9PBLrLyw1gB3jT', 'yxv0BW', 'zw5Pz21Hsw1Hz2vvCMW', 'DxnLCLnVBhzLza', 'ofPHy3fmDa', 'phaGC3r5Bgu9iMnVBg9YoIaJnJy2oYi+qxvJDw5LimoPBMLNBwuGy3ldQCoPzs48l3a+', 'ksi+cIaGicaGicaGicaGicaGicaGicaGicaGipcFKR4GvmoPBmoPy2HHCMDLCIbSj2LTywDLcIaGicaGicaGicaGicaGicaGicaGpc9IDxr0B24+cIaGicaGicaGicaGicaGica', 'Bw9KywXsDwXLC0nVBNrLBNq', 'mJm1mdu', 'CMfUA2LUz0XPC3q', 'z2v0rwXLBwvUDej5swq', 'CMvSB2fK', 'ywrTAw4', 'DgvZDa', 'serolvfsq29Kzs1fBMLNBwuT', '8j+uKIbwzxjYB3vPBgXHz2uGzhuGyM91Dg9U', 'C2v0twLUDxrLCW', 'zw5Pz21Hx2HHC19XCG', 'y291BNrKB3DUsw50zxj2ywW', 'igvZC2fPCYbYzxn0yw50CYK', 'DxnLCLbVAw50CW', 'zgL2', 'CxjFC2nHBM5Lza', 'y3vYCMvUDfnJyw5fBMLNBwfjza', 'rxjYB3iGCMvZDgfYDgLUzYbZy2fUBMvYoG', 'y29Kzq', 'AwqSihbZzxvKBYWGDhLWzsWGCg9PBNrZlcb0zwfTx2LKlcbPC19Hzg1PBIWGAxnFDgvZDcWGy3jLyxrLzf9HDa', 'cIaGicaGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNjHBMTPBMCTCg9PBNrZiJ4', 'zMXVB3i', '4P2mienLihbZzxvKBYbLC3qGzmoPASoGihv0AwXPC8oP', 'ywrK', 'Bg9HzfvZzxjeyxrH', 'C3rHDhvZ', 'zw5Pz21LC0XPC3q', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGica8AdqGC3r5Bgu9iMnVBg9YoIaJmZqZotCZoYbTyxjNAw4TyM90Dg9ToIaXmhb4oYi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaG', 'yxbWBgLJyxrPB24VANnVBG', 'pc9ZDhjVBMC+pc9WpGOGicaGicaGicaGicaGicaGicaGidXKAxyGAwq9iNfYy29Kzs0', 'ywrKrxzLBNrmAxn0zw5LCG', 'Dg9ju09tDhjPBMC', 'DxbKyxrL', 'AM9PBG', 'pha+4O+Zief1y3vUzsddQw5Pz21LihbYB2DYyw1TW6LLpc9WpG', 'C2vSzwn0zwrnB2rL', 'ig1PBNv0zxm', 'B3bHy2L0Eq', 'C3vIC3rYAw5N', 'Dg9tDhjPBMC', '4PYfimojBMLNBwuGChvIBgNdQwuGiq', '4PYfimojBMLNBwuGBwLZzsddOcbQB3vYice', 'pVcFLjmGsw5KAwnLidmGkc0ZmcbWB2LUDhmPpc9IDxr0B24+', 'CgXHEwvYuhnLDwrV', 'ywnJzxb0zwq', '4PYfifldQxbVBNnLigfJy2vWDmoPzsaH', 'BM93', 'yxv0AenOB2LJzq', 'BM90', 'CNvSzxmTC2vJDgLVBG', 'z2v0tw9UDgG', 'zgvZy3jPChrPB24', 'pgrPDIbJBgfZCZ0IAgLUDc1PDgvTia', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaG', 'Aw5JBhvKzxm', 'ksi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaG4PYfifzHBgLKzxikicaGicaGicaGicaGicaGicaGicaGicaGicaGidWVyNv0Dg9UpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGphaGC3r5Bgu9iMzVBNqTC2L6ztOGmc44nwvToYbJB2XVCJOGiZy2nJSGBwfYz2LUlxrVCdOGnxb4oYi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGvgvUDgf0AxzLCYbYzxn0yw50zxmGoIa', '4P2mie1HDxzHAxnLihldQxbVBNnLiceGW4LUAwDTzsbIBg9XDCoPzsbWB3vYide1ig1PBNv0zxmU', 'lcbMywXZzsKIpUkDJcbszwz1C2vYpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGicaGicaGicaGicaG', 'C3vIBwLZC2LVBNm', 'BMf2igj1DhrVBG', 'qwnJW6HZigf1Dg9YAxpdQtO', 'Cg9PBNrLCKv2zw50CW', 'DxnLCLrLyw1jBMzV', '4P2mievYCMv1CIbSB3jZigr1ignOyxjNzw1LBNq', 'ywrTAw5fBMLNBwfZtgLZDa', 'Dg9mB3DLCKnHC2u', 'sw5Zy3jPChrPB24GCSoPDxnZAwuGisbcAwvUDMvUDwuG', 'pc9KAxy+cIaGicaGicaGicaGicaGica8zgL2ignSyxnZpsjYyw5RAw5NlwLUzM8IpGOGicaGicaGicaGicaGicaGicaGidXZDhjVBMC+', 'y3vYC29Y', 'zw5Pz21LlwL0zw0', 'cIaGicaGicaGicaGicaGicaGicaGicaGidXOmIbZDhLSzt0Iy29SB3i6icm4muzfmeu7ig1HCMDPBI1IB3r0B206idiWChG7iJ7WN5oXifnJyw4GBguGuviGq29KztWVAdi+cIaGicaGicaGicaGicaGicaGicaGicaGidXWihn0EwXLpsjJB2XVCJOGD2HPDgu7ig1HCMDPBI1IB3r0B206idiWChG7iJ7dIw5Pz21Licm', 'pc9WpGOGicaGicaGicaGicaGicaGicaGicaGica8Adi+', 'AM9PBLrLyw1qC2v1zg8', 'DgvHBv9Pza', 'zw5Pz21HuhvIBgLZAgvK', '4P2miefJy8oOCYbYzwz1C8oP', 'Bg9HzefKBwLUugfUzwW', 'Bg9JA2vK', 'zw5Pz21HCW', 'iJ4J', 'C29YDa', 'ywn0AxzL', 'i3jLz2LZDgvYq2HVAwnLic5YywrPBY1VChrPB24', 'ywrTAw4TC2vJDgLVBG', '8j+rPsddIxf1AxbL', 'Dg9mB2nHBgvtDhjPBMC', 'CMvZzxrfBMLNBwfgB3jT', 'BMfTzq', 'C2LUz2XL', 'BgvUz3rO', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGica8l2G0pGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGphaGC3r5Bgu9iMnVBg9YoIaJnJy2oYbTyxjNAw46idvWEcaWoYi+phn0CM9UzZ5sW6LWB25ZzsbWCM9WB3pdQwuGoJWVC3rYB25NpIa', 'C3rVCa', 'y2HLy2TLza', 'ywrTAw5qzw5KAw5NvMfSAwrHDgLVBNm', 'y3vYCMvUDfvZzxi', 'iIbJBgfZCZ0ICxiTy29Kzs1JB250ywLUzxiGAgLKzgvUiJ48l2rPDJ4kicaGicaGicaGicaGicaGicaGicaGicaG', 'DhjPBq', 'z2v0uhjVz3jLC3m', 'ihbVAw50CYbNywDUW6LZice', 'rxjYB3iGB3bLBMLUzYbruIbZy2fUBMvYoG', 'pgjYpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGifrVBIbHzg1PBIb2ysb2ywXPzgvYihrHihldQxbVBNnLigjPzw50W7r0icekicaGicaGicaGicaGicaGicaGicaGicaGicaGidWVCd4kicaGicaGicaGicaGicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGicaGicaGicaG', 'rxjYzxvYigXVCNmGzguGBcDPBNnJCMLWDgLVBIa6ia', 'y2XVC2vZDa', 'zw5Pz21HsgLUDdm', 'cIaGicaGicaGicaGicaGica8zgL2ignSyxnZpsjYyw5RAw5NlxbVC2L0Aw9Uia', 'BNvTyMvY', 'DgL0Bgu', 'Cxjty2fUBMvY', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIbJBgfZCZ0IyNrUigj0BI1Kyw5NzxiIig9Uy2XPy2S9iMHKBKfWCc5KzwXLDgvfBMLNBweO', 'y2XHC3nmAxn0', 'rxjYB3i6', '4P2mievYCMv1CIbSB3jZigrLigXHigrLBwfUzguGzcDPBMrPy2u', 'C2v0sxrLBq', 'AwqSig5HBwuSignVzguSihbVAw50CW', 'DgvHBq', 'zM9YrwfJAa', 'pc9ZDhjVBMC+cIaGicaGicaGicaGicaGicaGicaGphnWyw4GC3r5Bgu9iMzVBNqTC2L6ztOGmc45zw07ignVBg9YoIaJodfgrtbfoYbTyxjNAw4TBgvMDdOGmtbWEdSIpG', 'Bwf5yMvtAw5NBgu', '8j+pHIbdBgfZC2vTzw50ieFdQw7dQxjHBa', '4P2mievYCMv1CIbSB3jZigrLigXHignVBM5LEgLVBIddOcbSj8oPCxvPCguGoIa', 'seroluu', 'pc9WpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGphaGC3r5Bgu9iMnVBg9YoIaJnJy2oYbTyxjNAw46idvWEcaWoYi+phn0CM9UzZ5sW6LWB25ZzsbJB3jYzwn0zsa6pc9ZDhjVBMC+ia', 'vhuGyxmGzmoPASoGihv0AwXPC8oPignLDcbPBMrPy2uGiq', '4O+WievUihnLBwfPBMuGBgvZimoPBMLNBwvZihnVBNqGywnJzxnZAwjSzxmGDw5PCxvLBwvUDcbLBNrYzsaXmMGGzxqGmtrOice', 'DMfSDwu', 'Cg9PBNrLCG', 'zw52AxjVBM1LBNq', 'y3jLyxrLq2XPzw50', 'ywrTAw5uB3rHBevUAwDTyxm', 'y3nZvgv4Da', 'Cg9ZAxrPB246igzPEgvKoYb0B3a6ida7igXLzNq6ida7ihDPzhrOoIaXmdaLoYbOzwLNAhq6ideWmcu7igjHy2TNCM91BMq6ihjNyMeOmcWWldaSmc45ktSGEI1PBMrLEdOGmtaWmda7igrPC3bSyxK6igzSzxG7igzSzxGTzgLYzwn0Aw9UoIbJB2X1Bw47igfSAwDUlwL0zw1ZoIbJzw50zxi7igP1C3rPzNKTy29UDgvUDdOGy2vUDgvYoYbWywrKAw5NoIaYmhb4oW', 'C2nOzwr1BgvKx2f0', '4PYfifr1igfZihjLAM9PBNqGBcFdQxf1AxbLici', 'pha+', 'Bg9NAw5qC2v1zg8', 'AgrUq3vYCMvUDfvZzxi', 'Cg9PBNrZ', 'CgfYC2u', '4P2mie1HDxzHAxnLihldQxbVBNnLiceGka', 'rxvYB3bLl1bHCMLZ', 'zw5Pz21HsgLUDdi', 'AwqSig51BwjLCIWGDgL0BguSihnJAgvKDwXLzf9HDcWGChvIBgLZAgvK', 'DxnLCLjHBMS', 'CgXHEwvYCW', 'ntC2oty5EwHLEvjr', 'D3jVBMDFyxr0zw1WDhm', 'phaGC3r5Bgu9iMnVBg9YoIaJnJy2oYi+qxvJDw5LihzHBgLKyxrPB24Gzw4Gyxr0zw50zs48l3a+', 'mI1KAwDPDa', 'pgGZpSojBMLNBwuGiW', 'CgfKu3rHCNq', '4PYfimojBMLNBwuGC3vWChjPBCoPzsaH', 'lMPZB24', 'yM9KEq', 'DhLWzq', 'phaGC3r5Bgu9iMnVBg9YoIaJnJy2oYbTyxjNAw46idvWEcaWoYi+8j+tTYbjBwfNztOGpgeGAhjLzJ0I', 'pc9WpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGphaGC3r5Bgu9iMnVBg9YoIaJnJy2oYbTyxjNAw46idvWEcaWoYi+q29KzsbruJOGphn0CM9UzZ4', 'BgLTAxq', 'W4LXDwLWzq', 'CxvLCNLtzwXLy3rVCG', 'rxjYB3iGDxbKyxrPBMCGy291BNrKB3DUoG', 'uLbdievYCM9YoG', 'pha+phn0CM9UzZ5jBMrPy2uGmIa6pc9ZDhjVBMC+ia', 'serox1nbtfrFmJaYnq', 'Bg9HzfbLBMrPBMDwywXPzgf0Aw9UCW', 'ic0G', 'zxjYB3i', 'D2fYBMLUzW', 'CgvUzgLUzW', 'phaGC3r5Bgu9iMnVBg9YoIaJzMy0ndq0oYi+rxjYzxvYigXVCNmGzhuGy2HHCMDLBwvUDcbKzxmGW6LUAwDTzxmUpc9WpG', 'zxHHy3q', 'CxjFC2vJCMv0', 'C29SDMvK', 'ywrTAw5uB3rHBfbSyxLLCNm', 'CgfZC3DVCMq', 'yxv0Ac1Zzwn0Aw9U', '4P2mifjLBxbSAxmGDg91CYbSzxmGy2HHBxbZice', '4PYfietdQxzLCNjVDwLSBgfNzsbKDsbIB3v0B24', 'AxnFywrTAw4', 'C2vSzwn0', 'zw5Pz21Hu2nOzwr1Bgu', 'yMfJA2DYB3vUzdOGi2y5zJLMotSGCgfKzgLUzZOGmtvWEdSGBwfYz2LUoIaXmhb4ida7igjVCMrLCI1YywrPDxm6idHWEdSGyM9YzgvYlwXLzNq6idrWEcbZB2XPzcaJzMzHytaWoW', 'yw5PBwf0Aw9U', 'BwvZC2fNzq', '4P2mifbZzxvKBYbVDsbTB3qGzguGCgfZC2uGAw5JB3jYzwn0ice', 'pc9Ond4kicaGicaGicaGicaGicaGicaGica8CcbZDhLSzt0Iy29SB3i6icm2nJy7ig1HCMDPBI1IB3r0B206ideWChG7iJ5dB2rLoIa8C3rYB25NpG', 'vhuGzg9PCYb1DgLSAxnLCIbSzxmGAw5KAwnLCYbKyw5ZigWNB3jKCMuGiq', 'lcaYksiG', 'rxjYzxvYignYW6LHDgLVBIddQxf1AxbLoG', 'CxvLCNLtzwXLy3rVCKfSBa', 'pha+8j+AGcboB3v2zwXSzsddQw5Pz21LigrPC3bVBMLIBguGitWVCd4', 'AgLUDdi', 'ic0GW4LUAwDTzsaJ', 'Bg9HzefKBwLUrw5Pz21HCW', 'yxbWzw5Kq2HPBgq', 'vMv1Ec10Dsb2CMfPBwvUDcb0zsbKW6LJB25Uzwn0zxiGpW', 'C29SB1bHC3n3B3jK', 'AwqSihbZzxvKBYWGDhLWzsWGCg9PBNrZlcb0zwfTx2LKlcbPC19Hzg1PBIWGAxnFDgvZDa', 'CMvQzwn0zwq', 'zNjVBq', 'CgXHEwvYvhLWzq', 'cIaGicaGicaGicaGicaGicaGicaGicaGicaGica8zgL2ihn0EwXLpsjTyxjNAw4TDg9WoIaXmhb4oYi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIbJBgfZCZ0IyNrUigj0BI1WCMLTyxj5iIbVBMnSAwnRpsjOzg5bChaUz2vUzxjHDgvbBMrtAg93uviOjW', 'zMLUzeLUzgv4', 'Bg9NAw5gB3jT', 'Dg9vChbLCKnHC2u', '4P2mievYCMv1CIbKzsb2ywXPzgf0Aw9U', 'Aw5MBW', 'CgXHEwvYx2LK', 'pc9WpG', 'mJe4nJu5n25dr0LYzq', 'pc9KAxy+', 'mtKXmZi1EgnKEvjQ', 'DxbKyxrLrw5Pz21H', 'ChjLDMvUDerLzMf1Bhq', 'ndm4nZKWme1Qu1zntW', 'pgrPDIbJBgfZCZ0IAgLUDc1PDgvTiJ4', 'CMvNAxn0zxjdAg9Py2u', 'Ag9Tzq', 'zw5Pz21Htg9JyxrPB24', 'phaGC3r5Bgu9iMnVBg9YoIaJzMy0ndq0oYi+rxjYzxvYigXVCNmGzhuGy2HHCMDLBwvUDc48l3a+', 'y291BNrKB3DUvgLTzxi', 'DgfYz2v0', 'mtCXotGXowvYExHkuq', '8j+oIsbcB25UzsbYW6LWB25ZzsaHifzHihnJyw5UzxiGBguGuviGy29KzsbWB3vYigDHz25LCIb0zxmGCg9PBNrZice', 'Bg9N', 'lcaXksi+8j+uKYbjBMrPy2uGmsaOltuGCg9PBNrZktWVyNv0Dg9UpG', 'CNbJ', 'C2HVD1nLy3rPB24', 'ksi+4PYp77Ipie1VzgLMAwvYpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIbJBgfZCZ0IyNrUia', 'lcaZksiG']; a0_0x211b = function () { return _0x2c5feb; }; return a0_0x211b(); }
        </script>
</body>

</html>